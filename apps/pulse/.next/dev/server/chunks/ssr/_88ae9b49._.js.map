{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dell/Desktop/Segmento-app-website-dev/frontend/apps/pulse/lib/newsApi.ts"],"sourcesContent":["// News API for Pulse\r\n// All requests use relative paths (/api/*) which are proxied server-side\r\n// by apps/pulse/app/api/[...path]/route.ts to avoid CORS issues.\r\n// The proxy forwards requests to NEXT_PUBLIC_PULSE_API_URL (default: localhost:8000).\r\n\r\nfunction getApiBase(): string {\r\n    // In the browser: use relative path starting with basePath (same origin, no CORS)\r\n    // In SSR/server context: use the full backend URL directly\r\n    if (typeof window !== 'undefined') {\r\n        return '/pulse'; // Must match next.config.ts basePath\r\n    }\r\n    return process.env.NEXT_PUBLIC_PULSE_API_URL || 'http://localhost:8000';\r\n}\r\n\r\nexport interface Article {\r\n    title: string;\r\n    description: string;\r\n    url: string;\r\n    image_url: string;\r\n    published_at: string;\r\n    source: string;\r\n    author?: string;\r\n    likes?: number;\r\n    dislikes?: number;\r\n    views?: number;\r\n    audio_url?: string;\r\n    text_summary?: string;\r\n    category?: string;\r\n    $id?: string;\r\n    id?: string; // Compatibility with standardized backend model\r\n}\r\n\r\nexport async function fetchNewsByCategory(\r\n    category: string,\r\n    page: number = 1,\r\n    limit: number = 20\r\n): Promise<Article[]> {\r\n    try {\r\n        const API_BASE = getApiBase();\r\n        const response = await fetch(\r\n            `${API_BASE}/api/news/${category}?page=${page}&limit=${limit}`,\r\n            {\r\n                cache: 'no-store',\r\n            }\r\n        );\r\n\r\n        if (!response.ok) {\r\n            console.error('Failed to fetch news:', response.statusText);\r\n            return [];\r\n        }\r\n\r\n        const data = await response.json();\r\n        return data.articles || [];\r\n    } catch (error) {\r\n        console.error('Error fetching news:', error);\r\n        return [];\r\n    }\r\n}\r\n\r\nexport async function searchNews(query: string): Promise<Article[]> {\r\n    try {\r\n        const API_BASE = getApiBase();\r\n        const response = await fetch(`${API_BASE}/api/search?q=${encodeURIComponent(query)}`, {\r\n            cache: 'no-store',\r\n        });\r\n\r\n        if (!response.ok) {\r\n            console.error('Failed to search news:', response.statusText);\r\n            return [];\r\n        }\r\n\r\n        const data = await response.json();\r\n        return data.articles || [];\r\n    } catch (error) {\r\n        console.error('Error searching news:', error);\r\n        return [];\r\n    }\r\n}\r\n\r\n// Fetch single research paper by ID\r\nexport async function fetchResearchPaperById(paperId: string): Promise<Article | null> {\r\n    try {\r\n        const API_BASE = getApiBase();\r\n        const response = await fetch(`${API_BASE}/api/research/${paperId}`, {\r\n            cache: 'no-store',\r\n        });\r\n\r\n        if (!response.ok) {\r\n            if (response.status === 404) return null;\r\n            console.error('Failed to fetch research paper:', response.statusText);\r\n            return null;\r\n        }\r\n\r\n        const data = await response.json();\r\n        return data.paper;\r\n    } catch (error) {\r\n        console.error(\"Error fetching research paper:\", error);\r\n        return null;\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA,qBAAqB;AACrB,yEAAyE;AACzE,iEAAiE;AACjE,sFAAsF;AAEtF,SAAS;IACL,kFAAkF;IAClF,2DAA2D;IAC3D;;IAGA,OAAO,6DAAyC;AACpD;AAoBO,eAAe,oBAClB,QAAgB,EAChB,OAAe,CAAC,EAChB,QAAgB,EAAE;IAElB,IAAI;QACA,MAAM,WAAW;QACjB,MAAM,WAAW,MAAM,MACnB,GAAG,SAAS,UAAU,EAAE,SAAS,MAAM,EAAE,KAAK,OAAO,EAAE,OAAO,EAC9D;YACI,OAAO;QACX;QAGJ,IAAI,CAAC,SAAS,EAAE,EAAE;YACd,QAAQ,KAAK,CAAC,yBAAyB,SAAS,UAAU;YAC1D,OAAO,EAAE;QACb;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,OAAO,KAAK,QAAQ,IAAI,EAAE;IAC9B,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,wBAAwB;QACtC,OAAO,EAAE;IACb;AACJ;AAEO,eAAe,WAAW,KAAa;IAC1C,IAAI;QACA,MAAM,WAAW;QACjB,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,cAAc,EAAE,mBAAmB,QAAQ,EAAE;YAClF,OAAO;QACX;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YACd,QAAQ,KAAK,CAAC,0BAA0B,SAAS,UAAU;YAC3D,OAAO,EAAE;QACb;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,OAAO,KAAK,QAAQ,IAAI,EAAE;IAC9B,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO,EAAE;IACb;AACJ;AAGO,eAAe,uBAAuB,OAAe;IACxD,IAAI;QACA,MAAM,WAAW;QACjB,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,cAAc,EAAE,SAAS,EAAE;YAChE,OAAO;QACX;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YACd,IAAI,SAAS,MAAM,KAAK,KAAK,OAAO;YACpC,QAAQ,KAAK,CAAC,mCAAmC,SAAS,UAAU;YACpE,OAAO;QACX;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,OAAO,KAAK,KAAK;IACrB,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,kCAAkC;QAChD,OAAO;IACX;AACJ"}},
    {"offset": {"line": 79, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dell/Desktop/Segmento-app-website-dev/frontend/apps/pulse/components/TimeDisplay.tsx"],"sourcesContent":["import { Clock } from \"lucide-react\";\r\n\r\ninterface TimeDisplayProps {\r\n    timestamp: string;\r\n    className?: string;\r\n}\r\n\r\nexport default function TimeDisplay({ timestamp, className = \"\" }: TimeDisplayProps) {\r\n    let formattedTime = \"Invalid Date\";\r\n    try {\r\n        if (!timestamp) throw new Error(\"No timestamp\");\r\n        formattedTime = new Intl.DateTimeFormat('en-IN', {\r\n            timeZone: 'Asia/Kolkata',\r\n            day: '2-digit',\r\n            month: 'short',\r\n            year: 'numeric',\r\n            hour: '2-digit',\r\n            minute: '2-digit',\r\n            hour12: true\r\n        }).format(new Date(timestamp));\r\n    } catch (e) {\r\n        console.error(\"Invalid time value:\", timestamp);\r\n    }\r\n\r\n    return (\r\n        <div className={`flex items-center gap-2 text-sm text-gray-500 ${className}`}>\r\n            <Clock className=\"w-4 h-4\" />\r\n            <span>{formattedTime} IST</span>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;;AAOe,SAAS,YAAY,EAAE,SAAS,EAAE,YAAY,EAAE,EAAoB;IAC/E,IAAI,gBAAgB;IACpB,IAAI;QACA,IAAI,CAAC,WAAW,MAAM,IAAI,MAAM;QAChC,gBAAgB,IAAI,KAAK,cAAc,CAAC,SAAS;YAC7C,UAAU;YACV,KAAK;YACL,OAAO;YACP,MAAM;YACN,MAAM;YACN,QAAQ;YACR,QAAQ;QACZ,GAAG,MAAM,CAAC,IAAI,KAAK;IACvB,EAAE,OAAO,GAAG;QACR,QAAQ,KAAK,CAAC,uBAAuB;IACzC;IAEA,qBACI,8OAAC;QAAI,WAAW,CAAC,8CAA8C,EAAE,WAAW;;0BACxE,8OAAC,6MAAK;gBAAC,WAAU;;;;;;0BACjB,8OAAC;;oBAAM;oBAAc;;;;;;;;;;;;;AAGjC"}},
    {"offset": {"line": 134, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dell/Desktop/Segmento-app-website-dev/frontend/packages/shared/src/idGenerator.ts"],"sourcesContent":["/**\r\n * Article ID Generator - SHA-256 Based\r\n * ====================================\r\n * \r\n * Generates Appwrite-compatible article IDs (32 characters) from URLs.\r\n * Uses SHA-256 hash for deterministic, collision-resistant IDs.\r\n */\r\n\r\n/**\r\n * Generate article ID from URL using SHA-256 hash.\r\n * Returns 32-character alphanumeric ID compatible with Appwrite.\r\n * \r\n * @param url - Article URL\r\n * @returns Promise<string> - 32-character article ID\r\n * \r\n * @example\r\n * const id = await generateArticleId(\"https://example.com/article\");\r\n * console.log(id); // \"a1b2c3d4e5f6...\" (32 chars)\r\n */\r\nexport async function generateArticleId(url: string): Promise<string> {\r\n    // Use Web Crypto API (available in browsers and Node.js 15+)\r\n    const encoder = new TextEncoder();\r\n    const data = encoder.encode(url);\r\n\r\n    // Generate SHA-256 hash\r\n    const hashBuffer = await crypto.subtle.digest('SHA-256', data);\r\n\r\n    // Convert to hex string (64 characters)\r\n    const hashArray = Array.from(new Uint8Array(hashBuffer));\r\n    const hashHex = hashArray\r\n        .map(b => b.toString(16).padStart(2, '0'))\r\n        .join('');\r\n\r\n    // Take first 32 characters (sufficient uniqueness)\r\n    return hashHex.substring(0, 32);\r\n}\r\n\r\n\r\n\r\n/**\r\n * Batch generate IDs for multiple URLs.\r\n * Useful for preloading engagement stats.\r\n * \r\n * @param urls - Array of article URLs\r\n * @returns Promise<Map<string, string>> - Map of URL to article ID\r\n */\r\nexport async function generateArticleIds(urls: string[]): Promise<Map<string, string>> {\r\n    const idMap = new Map<string, string>();\r\n\r\n    await Promise.all(\r\n        urls.map(async (url) => {\r\n            const id = await generateArticleId(url);\r\n            idMap.set(url, id);\r\n        })\r\n    );\r\n\r\n    return idMap;\r\n}\r\n\r\n/**\r\n * Validate if a string looks like a valid article ID.\r\n * \r\n * @param id - Potential article ID\r\n * @returns boolean - True if valid format\r\n */\r\nexport function isValidArticleId(id: string): boolean {\r\n    // Valid Appwrite ID: 32 alphanumeric characters\r\n    return /^[a-f0-9]{32}$/.test(id);\r\n}\r\n"],"names":[],"mappings":"AAAA;;;;;;CAMC,GAED;;;;;;;;;;CAUC;;;;;;;;AACM,eAAe,kBAAkB,GAAW;IAC/C,6DAA6D;IAC7D,MAAM,UAAU,IAAI;IACpB,MAAM,OAAO,QAAQ,MAAM,CAAC;IAE5B,wBAAwB;IACxB,MAAM,aAAa,MAAM,OAAO,MAAM,CAAC,MAAM,CAAC,WAAW;IAEzD,wCAAwC;IACxC,MAAM,YAAY,MAAM,IAAI,CAAC,IAAI,WAAW;IAC5C,MAAM,UAAU,UACX,GAAG,CAAC,CAAA,IAAK,EAAE,QAAQ,CAAC,IAAI,QAAQ,CAAC,GAAG,MACpC,IAAI,CAAC;IAEV,mDAAmD;IACnD,OAAO,QAAQ,SAAS,CAAC,GAAG;AAChC;AAWO,eAAe,mBAAmB,IAAc;IACnD,MAAM,QAAQ,IAAI;IAElB,MAAM,QAAQ,GAAG,CACb,KAAK,GAAG,CAAC,OAAO;QACZ,MAAM,KAAK,MAAM,kBAAkB;QACnC,MAAM,GAAG,CAAC,KAAK;IACnB;IAGJ,OAAO;AACX;AAQO,SAAS,iBAAiB,EAAU;IACvC,gDAAgD;IAChD,OAAO,iBAAiB,IAAI,CAAC;AACjC"}},
    {"offset": {"line": 186, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dell/Desktop/Segmento-app-website-dev/frontend/apps/pulse/lib/analytics.ts"],"sourcesContent":["/**\r\n * Engagement Analytics - Now powered by Appwrite\r\n * Phase 3: Migrated from Firebase to Appwrite backend\r\n * Performance optimized: Reduced polling frequency for better backend responsiveness\r\n */\r\n\r\nimport { generateArticleId } from '@/shared/idGenerator';\r\n\r\nconst API_BASE_URL = process.env.NEXT_PUBLIC_PULSE_API_URL || 'https://workwithshafisk-segmentopulse-backend.hf.space';\r\n\r\nexport interface ArticleStats {\r\n    viewCount: number;\r\n    likeCount: number;\r\n    dislikeCount: number;\r\n}\r\n\r\nexport interface Comment {\r\n    id: string;\r\n    text: string;\r\n    userId: string;\r\n    userName: string;\r\n    createdAt: number;\r\n}\r\n\r\n// Simple cache to reduce redundant API calls\r\nconst statsCache = new Map<string, { data: ArticleStats; timestamp: number }>();\r\nconst CACHE_TTL = 60000; // 60 seconds cache (increased from 5s for better performance)\r\n\r\n// Fetch with timeout to prevent hanging\r\n// Fetch with timeout to prevent hanging\r\nasync function fetchWithTimeout(url: string, timeout = 15000): Promise<Response> {\r\n    const controller = new AbortController();\r\n    const id = setTimeout(() => controller.abort(new Error('Request timed out')), timeout);\r\n    try {\r\n        const response = await fetch(url, { signal: controller.signal });\r\n        clearTimeout(id);\r\n        return response;\r\n    } catch (error) {\r\n        clearTimeout(id);\r\n        throw error;\r\n    }\r\n}\r\n\r\n/**\r\n * Get article stats from Appwrite via backend API\r\n * Optimized with caching and timeout\r\n * \r\n * @param articleUrl - Article URL (used for fallback ID generation)\r\n * @param articleId - Optional authoritative ID from backend (recommended)\r\n */\r\nexport async function getArticleStats(\r\n    articleUrl: string,\r\n    articleId?: string,\r\n    category?: string\r\n): Promise<ArticleStats> {\r\n    try {\r\n        // Use provided ID or generate from URL\r\n        const id = articleId || await generateArticleId(articleUrl);\r\n\r\n        // Check cache first\r\n        const cached = statsCache.get(id);\r\n        if (cached && Date.now() - cached.timestamp < CACHE_TTL) {\r\n            return cached.data;\r\n        }\r\n\r\n        const queryParams = category ? `?category=${encodeURIComponent(category)}` : '';\r\n        const response = await fetchWithTimeout(`${API_BASE_URL}/api/engagement/articles/${id}/stats${queryParams}`);\r\n\r\n        if (!response.ok) {\r\n            throw new Error('Failed to fetch stats');\r\n        }\r\n\r\n        const data = await response.json();\r\n        const stats = {\r\n            viewCount: data.views || 0,\r\n            likeCount: data.likes || 0,\r\n            dislikeCount: data.dislikes || 0\r\n        };\r\n\r\n        // Cache the result\r\n        statsCache.set(id, { data: stats, timestamp: Date.now() });\r\n\r\n        return stats;\r\n    } catch (error: any) {\r\n        if (error.name === 'AbortError' || error.message.includes('timed out')) {\r\n            console.warn(`Stats fetch timed out for ${articleUrl.slice(-20)}`);\r\n        } else {\r\n            console.error('Failed to get article stats:', error);\r\n        }\r\n        // Return zeros instead of failing, but log the error\r\n        return { viewCount: 0, likeCount: 0, dislikeCount: 0 };\r\n    }\r\n}\r\n\r\n/**\r\n * Increment view count for an article\r\n * \r\n * @param articleUrl - Article URL (used for fallback ID generation)\r\n * @param title - Article title\r\n * @param image - Article image URL\r\n * @param category - Article category\r\n * @param articleId - Optional authoritative ID from backend (recommended)\r\n */\r\nexport async function incrementArticleView(\r\n    articleUrl: string,\r\n    title?: string,\r\n    image?: string,\r\n    category?: string,\r\n    articleId?: string\r\n): Promise<number> {\r\n    try {\r\n        // Use provided ID or generate from URL\r\n        const id = articleId || await generateArticleId(articleUrl);\r\n        const response = await fetch(`${API_BASE_URL}/api/engagement/articles/${id}/view`, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                url: articleUrl,\r\n                title: title || \"Unknown Article\",\r\n                image: image || \"\",\r\n                category: category || \"wildcard\"\r\n            }),\r\n            signal: AbortSignal.timeout(8000)\r\n        });\r\n\r\n        if (!response.ok) {\r\n            throw new Error('Failed to increment view');\r\n        }\r\n\r\n        const data = await response.json();\r\n        // Invalidate cache for this article\r\n        statsCache.delete(id);\r\n        return data.views || 1;\r\n    } catch (error: any) {\r\n        if (error.name === 'AbortError' || error.name === 'TimeoutError') {\r\n            console.debug('View tracking timed out (non-critical)');\r\n        } else {\r\n            console.error('Failed to increment view count:', error);\r\n        }\r\n        return 0;\r\n    }\r\n}\r\n\r\n/**\r\n * Toggle like for an article\r\n * \r\n * @param articleUrl - Article URL (used for fallback ID generation)\r\n * @param incrementVal - Whether to increment (true) or decrement (false)\r\n * @param articleId - Optional authoritative ID from backend (recommended)\r\n */\r\nexport async function toggleLike(\r\n    articleUrl: string,\r\n    incrementVal: boolean,\r\n    articleId?: string\r\n): Promise<void> {\r\n    try {\r\n        // Use provided ID or generate from URL\r\n        const id = articleId || await generateArticleId(articleUrl);\r\n\r\n        // For now, only increment (no decrement support yet)\r\n        if (incrementVal) {\r\n            const response = await fetch(`${API_BASE_URL}/api/engagement/articles/${id}/like`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({ url: articleUrl }), // Send URL for auto-creation\r\n                signal: AbortSignal.timeout(8000)\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error('Failed to like article');\r\n            }\r\n\r\n            // Invalidate cache for this article\r\n            statsCache.delete(id);\r\n        }\r\n    } catch (error: any) {\r\n        if (error.name !== 'AbortError') {\r\n            console.error('Failed to toggle like:', error);\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Toggle dislike for an article\r\n * \r\n * @param articleUrl - Article URL (used for fallback ID generation)\r\n * @param incrementVal - Whether to increment (true) or decrement (false)\r\n * @param articleId - Optional authoritative ID from backend (recommended)\r\n */\r\nexport async function toggleDislike(\r\n    articleUrl: string,\r\n    incrementVal: boolean,\r\n    articleId?: string\r\n): Promise<void> {\r\n    try {\r\n        // Use provided ID or generate from URL\r\n        const id = articleId || await generateArticleId(articleUrl);\r\n\r\n        // For now, only increment (no decrement support yet)\r\n        if (incrementVal) {\r\n            const response = await fetch(`${API_BASE_URL}/api/engagement/articles/${id}/dislike`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({ url: articleUrl }), // Send URL for auto-creation\r\n                signal: AbortSignal.timeout(8000)\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error('Failed to dislike article');\r\n            }\r\n\r\n            // Invalidate cache for this article\r\n            statsCache.delete(id);\r\n        }\r\n    } catch (error: any) {\r\n        if (error.name !== 'AbortError') {\r\n            console.error('Failed to toggle dislike:', error);\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Subscribe to article stats (polling-based since we're not using Firebase anymore)\r\n * Optimized: Polls every 30 seconds to reduce backend load\r\n * @param articleUrl - Article URL\r\n * @param callback - Callback function to receive stats\r\n * @returns Unsubscribe function\r\n */\r\nexport function subscribeToArticleStats(\r\n    articleUrl: string,\r\n    callback: (stats: ArticleStats) => void\r\n): () => void {\r\n    let intervalId: NodeJS.Timeout | null = null;\r\n    let isSubscribed = true;\r\n\r\n    // Poll every 30 seconds (reduced from 5s for better performance)\r\n    const poll = async () => {\r\n        if (!isSubscribed) return;\r\n        const stats = await getArticleStats(articleUrl);\r\n        if (isSubscribed) callback(stats);\r\n    };\r\n\r\n    // Initial fetch\r\n    poll();\r\n\r\n    // Set up polling - Reduced frequency to prevent backend overload\r\n    intervalId = setInterval(poll, 30000);\r\n\r\n    // Return unsubscribe function\r\n    return () => {\r\n        isSubscribed = false;\r\n        if (intervalId) {\r\n            clearInterval(intervalId);\r\n        }\r\n    };\r\n}\r\n\r\n/**\r\n * Get article view count (backward compatibility)\r\n * \r\n * @param articleUrl - Article URL (used for fallback ID generation)\r\n * @param articleId - Optional authoritative ID from backend (recommended)\r\n */\r\nexport async function getArticleViewCount(\r\n    articleUrl: string,\r\n    articleId?: string\r\n): Promise<number> {\r\n    const stats = await getArticleStats(articleUrl, articleId);\r\n    return stats.viewCount;\r\n}\r\n\r\n/**\r\n * Get trending articles from backend\r\n */\r\nexport async function getTrendingArticles(hours: number = 24, limit: number = 10): Promise<any[]> {\r\n    try {\r\n        const response = await fetch(\r\n            `${API_BASE_URL}/api/engagement/articles/trending?hours=${hours}&limit=${limit}`\r\n        );\r\n\r\n        if (!response.ok) {\r\n            throw new Error('Failed to fetch trending articles');\r\n        }\r\n\r\n        const data = await response.json();\r\n        return data.articles || [];\r\n    } catch (error) {\r\n        console.error('Failed to get trending articles:', error);\r\n        return [];\r\n    }\r\n}\r\n\r\n// NOTE: Comments functionality removed - not implemented in Appwrite backend yet\r\n// If needed in future, implement via Appwrite backend API\r\n\r\nexport async function addComment(articleUrl: string, text: string, userName: string = 'Anonymous'): Promise<void> {\r\n    console.warn('Comments feature not yet implemented in Appwrite backend');\r\n    // TODO: Implement when backend supports comments\r\n}\r\n\r\nexport function subscribeToComments(\r\n    articleUrl: string,\r\n    callback: (comments: Comment[]) => void\r\n): () => void {\r\n    console.warn('Comments feature not yet implemented in Appwrite backend');\r\n    // TODO: Implement when backend supports comments\r\n    return () => { };\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 412, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dell/Desktop/Segmento-app-website-dev/frontend/apps/pulse/components/CardEngagementStats.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { Eye, ThumbsUp } from 'lucide-react';\r\nimport { getArticleStats, type ArticleStats } from '@/lib/analytics';\r\n\r\ninterface CardEngagementStatsProps {\r\n    articleUrl: string;\r\n    articleId?: string;  // NEW: Authoritative ID from backend (recommended)\r\n    category?: string;   // NEW: For strict routing\r\n    className?: string;\r\n    initialStats?: ArticleStats;\r\n}\r\n\r\nexport default function CardEngagementStats({ articleUrl, articleId, category, className = '', initialStats }: CardEngagementStatsProps) {\r\n    const [stats, setStats] = useState<ArticleStats>(initialStats || { viewCount: 0, likeCount: 0, dislikeCount: 0 });\r\n\r\n    useEffect(() => {\r\n        // If we have initial stats, don't fetch immediately\r\n        // We could optionally set up a subscription or poll later\r\n        if (initialStats) return;\r\n\r\n        let isMounted = true;\r\n        const fetchStats = async () => {\r\n            const data = await getArticleStats(articleUrl, articleId, category);\r\n            if (isMounted) setStats(data);\r\n        };\r\n        fetchStats();\r\n        return () => { isMounted = false; };\r\n    }, [articleUrl, articleId, category, initialStats]);\r\n\r\n    return (\r\n        <div className={`flex items-center gap-3 text-xs text-gray-500 ${className}`}>\r\n            <div className=\"flex items-center gap-1\">\r\n                <Eye className=\"w-3 h-3\" />\r\n                <span>{stats.viewCount.toLocaleString()}</span>\r\n            </div>\r\n            {stats.likeCount > 0 && (\r\n                <div className=\"flex items-center gap-1\">\r\n                    <ThumbsUp className=\"w-3 h-3\" />\r\n                    <span>{stats.likeCount.toLocaleString()}</span>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;AAJA;;;;;AAce,SAAS,oBAAoB,EAAE,UAAU,EAAE,SAAS,EAAE,QAAQ,EAAE,YAAY,EAAE,EAAE,YAAY,EAA4B;IACnI,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAe,gBAAgB;QAAE,WAAW;QAAG,WAAW;QAAG,cAAc;IAAE;IAE/G,IAAA,kNAAS,EAAC;QACN,oDAAoD;QACpD,0DAA0D;QAC1D,IAAI,cAAc;QAElB,IAAI,YAAY;QAChB,MAAM,aAAa;YACf,MAAM,OAAO,MAAM,IAAA,oJAAe,EAAC,YAAY,WAAW;YAC1D,IAAI,WAAW,SAAS;QAC5B;QACA;QACA,OAAO;YAAQ,YAAY;QAAO;IACtC,GAAG;QAAC;QAAY;QAAW;QAAU;KAAa;IAElD,qBACI,8OAAC;QAAI,WAAW,CAAC,8CAA8C,EAAE,WAAW;;0BACxE,8OAAC;gBAAI,WAAU;;kCACX,8OAAC,uMAAG;wBAAC,WAAU;;;;;;kCACf,8OAAC;kCAAM,MAAM,SAAS,CAAC,cAAc;;;;;;;;;;;;YAExC,MAAM,SAAS,GAAG,mBACf,8OAAC;gBAAI,WAAU;;kCACX,8OAAC,0NAAQ;wBAAC,WAAU;;;;;;kCACpB,8OAAC;kCAAM,MAAM,SAAS,CAAC,cAAc;;;;;;;;;;;;;;;;;;AAKzD"}},
    {"offset": {"line": 511, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dell/Desktop/Segmento-app-website-dev/frontend/apps/pulse/lib/dateUtils.ts"],"sourcesContent":["export interface FreshnessTag {\r\n    text: string;\r\n    className: string;\r\n}\r\n\r\nexport function getFreshnessTag(dateString: string): FreshnessTag {\r\n    const date = new Date(dateString);\r\n    const now = new Date();\r\n\r\n    // Reset times to compare dates only\r\n    const d = new Date(date.getFullYear(), date.getMonth(), date.getDate());\r\n    const n = new Date(now.getFullYear(), now.getMonth(), now.getDate());\r\n\r\n    const diffTime = n.getTime() - d.getTime();\r\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)); // Difference in days\r\n\r\n    if (diffDays <= 0) {\r\n        return { text: \"Today's News\", className: \"bg-green-100 text-green-800 border-green-200\" };\r\n    } else if (diffDays === 1) {\r\n        return { text: \"Yesterday's News\", className: \"bg-orange-100 text-orange-800 border-orange-200\" };\r\n    } else {\r\n        return { text: \"Previous News\", className: \"bg-amber-100 text-amber-800 border-amber-200\" };\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAKO,SAAS,gBAAgB,UAAkB;IAC9C,MAAM,OAAO,IAAI,KAAK;IACtB,MAAM,MAAM,IAAI;IAEhB,oCAAoC;IACpC,MAAM,IAAI,IAAI,KAAK,KAAK,WAAW,IAAI,KAAK,QAAQ,IAAI,KAAK,OAAO;IACpE,MAAM,IAAI,IAAI,KAAK,IAAI,WAAW,IAAI,IAAI,QAAQ,IAAI,IAAI,OAAO;IAEjE,MAAM,WAAW,EAAE,OAAO,KAAK,EAAE,OAAO;IACxC,MAAM,WAAW,KAAK,IAAI,CAAC,WAAW,CAAC,OAAO,KAAK,KAAK,EAAE,IAAI,qBAAqB;IAEnF,IAAI,YAAY,GAAG;QACf,OAAO;YAAE,MAAM;YAAgB,WAAW;QAA+C;IAC7F,OAAO,IAAI,aAAa,GAAG;QACvB,OAAO;YAAE,MAAM;YAAoB,WAAW;QAAkD;IACpG,OAAO;QACH,OAAO;YAAE,MAAM;YAAiB,WAAW;QAA+C;IAC9F;AACJ"}},
    {"offset": {"line": 544, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dell/Desktop/Segmento-app-website-dev/frontend/apps/pulse/components/AudioPlayer.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useRef, useEffect } from 'react';\r\nimport { Headphones, Loader2, Pause, Play } from 'lucide-react';\r\nimport { cn } from '@/shared/utils';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\ninterface AudioPlayerProps {\r\n    articleId: string; // The doc ID (for caching/state)\r\n    articleUrl: string; // The actual article URL (required for backend)\r\n    initialAudioUrl?: string; // If already generated\r\n    title: string;\r\n    image: string;\r\n    category: string;\r\n    className?: string;\r\n}\r\n\r\nexport default function AudioPlayer({ articleId, articleUrl, initialAudioUrl, title, image, category, className }: AudioPlayerProps) {\r\n    const [audioUrl, setAudioUrl] = useState<string | null>(initialAudioUrl || null);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [isPlaying, setIsPlaying] = useState(false);\r\n    const [fileUrl, setFileUrl] = useState<string>(''); // For view url param\r\n\r\n    const audioRef = useRef<HTMLAudioElement | null>(null);\r\n\r\n    // Initialize audio element\r\n    useEffect(() => {\r\n        if (!audioRef.current) {\r\n            audioRef.current = new Audio();\r\n\r\n            // Handle playback ended\r\n            audioRef.current.onended = () => {\r\n                setIsPlaying(false);\r\n            };\r\n\r\n            // Handle errors\r\n            audioRef.current.onerror = () => {\r\n                console.error(\"Audio playback error\");\r\n                setIsPlaying(false);\r\n                setIsLoading(false);\r\n            };\r\n        }\r\n\r\n        return () => {\r\n            // Cleanup\r\n            if (audioRef.current) {\r\n                audioRef.current.pause();\r\n                audioRef.current = null;\r\n            }\r\n        };\r\n    }, []);\r\n\r\n    const togglePlay = async (e: React.MouseEvent) => {\r\n        e.preventDefault(); // Prevent navigating if inside a Link\r\n        e.stopPropagation();\r\n\r\n        if (isLoading) return;\r\n\r\n        // If playing, pause\r\n        if (isPlaying && audioRef.current) {\r\n            audioRef.current.pause();\r\n            setIsPlaying(false);\r\n            return;\r\n        }\r\n\r\n        // If audio user/url exists but stopped, play\r\n        if (audioUrl && audioRef.current) {\r\n            if (audioRef.current.src !== audioUrl) {\r\n                audioRef.current.src = audioUrl;\r\n            }\r\n            try {\r\n                await audioRef.current.play();\r\n                setIsPlaying(true);\r\n            } catch (err) {\r\n                console.error(\"Play failed\", err);\r\n            }\r\n            return;\r\n        }\r\n\r\n        // Need to generate audio\r\n        setIsLoading(true);\r\n        try {\r\n            const API_BASE = typeof window !== 'undefined' ? '/pulse' : (process.env.NEXT_PUBLIC_PULSE_API_URL || 'http://localhost:8000');\r\n            const response = await fetch(`${API_BASE}/api/audio/generate`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    article_url: articleUrl,  // FIXED: Use actual URL instead of ID\r\n                    title: title,\r\n                    image_url: image,\r\n                    category: category\r\n                })\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (data.success && data.audio_url) {\r\n                setAudioUrl(data.audio_url);\r\n                if (audioRef.current) {\r\n                    audioRef.current.src = data.audio_url;\r\n                    await audioRef.current.play();\r\n                    setIsPlaying(true);\r\n                }\r\n            } else {\r\n                // Handle both FastAPI error format (detail) and custom format (message)\r\n                const errorMsg = data.message || data.detail || \"Unknown error occurred\";\r\n                console.error(\"Audio generation failed\", errorMsg);\r\n            }\r\n\r\n        } catch (error) {\r\n            console.error(\"Audio fetch error\", error);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <button\r\n            onClick={togglePlay}\r\n            className={cn(\r\n                \"relative flex items-center justify-center w-8 h-8 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors focus:outline-none focus:ring-2 focus:ring-purple-500\",\r\n                isPlaying && \"bg-purple-100 text-purple-600 ring-2 ring-purple-500 ring-opacity-50\",\r\n                className\r\n            )}\r\n            title={isPlaying ? \"Pause Summary\" : \"Play Audio Summary\"}\r\n            aria-label={isPlaying ? \"Pause Audio Summary\" : \"Play Audio Summary\"}\r\n        >\r\n            <AnimatePresence mode=\"wait\">\r\n                {isLoading ? (\r\n                    <motion.div\r\n                        key=\"loading\"\r\n                        initial={{ opacity: 0, scale: 0.8 }}\r\n                        animate={{ opacity: 1, scale: 1 }}\r\n                        exit={{ opacity: 0, scale: 0.8 }}\r\n                    >\r\n                        <Loader2 className=\"w-4 h-4 animate-spin text-purple-600\" />\r\n                    </motion.div>\r\n                ) : isPlaying ? (\r\n                    <motion.div\r\n                        key=\"pause\"\r\n                        initial={{ opacity: 0, scale: 0.8 }}\r\n                        animate={{ opacity: 1, scale: 1 }}\r\n                        exit={{ opacity: 0, scale: 0.8 }}\r\n                    >\r\n                        <Pause className=\"w-4 h-4 fill-current\" />\r\n                        {/* Pulse Ring */}\r\n                        <span className=\"absolute inline-flex h-full w-full rounded-full bg-purple-400 opacity-20 animate-ping inset-0\"></span>\r\n                    </motion.div>\r\n                ) : (\r\n                    <motion.div\r\n                        key=\"play\"\r\n                        initial={{ opacity: 0, scale: 0.8 }}\r\n                        animate={{ opacity: 1, scale: 1 }}\r\n                        exit={{ opacity: 0, scale: 0.8 }}\r\n                    >\r\n                        {/* Default Icon */}\r\n                        {audioUrl ? <Play className=\"w-4 h-4 ml-0.5\" /> : <Headphones className=\"w-4 h-4\" />}\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n        </button>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 760, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dell/Desktop/Segmento-app-website-dev/frontend/apps/pulse/hooks/useEngagement.ts"],"sourcesContent":["/**\r\n * Engagement Hook - Article Interactions\r\n * =======================================\r\n * \r\n * React hook for managing article engagement (likes, dislikes, views).\r\n * Automatically generates SHA-256 IDs from article URLs.\r\n */\r\n\r\nimport { useState, useEffect, useCallback, useRef } from 'react';\r\nimport { generateArticleId } from '@/shared/idGenerator';\r\n\r\nexport interface EngagementStats {\r\n    article_id: string;\r\n    likes: number;\r\n    dislikes: number;\r\n    views: number;\r\n    success: boolean;\r\n}\r\n\r\nexport interface UseEngagementReturn {\r\n    stats: EngagementStats | null;\r\n    loading: boolean;\r\n    error: string | null;\r\n    like: () => Promise<void>;\r\n    dislike: () => Promise<void>;\r\n    trackView: () => Promise<void>;\r\n    refetch: () => Promise<void>;\r\n}\r\n\r\n/**\r\n * Hook for managing article engagement.\r\n * \r\n * @param articleUrl - URL of the article\r\n * @param autoTrackView - Automatically track view on mount (default: true)\r\n * @returns Engagement stats and interaction functions\r\n * \r\n * @example\r\n * ```tsx\r\n * const { stats, like, dislike, loading } = useEngagement(article.url);\r\n * \r\n * return (\r\n *   <div>\r\n *     <button onClick={like}>‚ù§Ô∏è {stats?.likes || 0}</button>\r\n *     <button onClick={dislike}>üëé {stats?.dislikes || 0}</button>\r\n *   </div>\r\n * );\r\n * ```\r\n */\r\nexport function useEngagement(\r\n    articleUrl: string,\r\n    category?: string,\r\n    title?: string,\r\n    image?: string,\r\n    autoTrackView: boolean = true,\r\n    initialArticleId?: string\r\n): UseEngagementReturn {\r\n    // ... (state) ...\r\n    const [articleId, setArticleId] = useState<string>(initialArticleId || '');\r\n    const [stats, setStats] = useState<EngagementStats | null>(null);\r\n    const [loading, setLoading] = useState<boolean>(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    // ... (useEffect for ID generation) ...\r\n    useEffect(() => {\r\n        if (initialArticleId) {\r\n            setArticleId(initialArticleId);\r\n            return;\r\n        }\r\n\r\n        if (articleUrl) {\r\n            generateArticleId(articleUrl)\r\n                .then(setArticleId)\r\n                .catch((err) => {\r\n                    console.error('Failed to generate article ID:', err);\r\n                    setError('Failed to generate article ID');\r\n                });\r\n        }\r\n    }, [articleUrl]);\r\n\r\n    // Base API URL\r\n    const API_BASE = typeof window !== 'undefined' ? '/pulse' : (process.env.NEXT_PUBLIC_PULSE_API_URL || 'http://localhost:8000');\r\n\r\n    // Helper to get request body\r\n    const getRequestBody = () => ({\r\n        url: articleUrl,\r\n        title: title || \"Unknown Article\",\r\n        image: image || \"\",\r\n        category: category || \"wildcard\"\r\n    });\r\n\r\n    // Fetch engagement stats (GET request, no body needed)\r\n    const fetchStats = useCallback(async () => {\r\n        if (!articleId) return;\r\n\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            // Append category to help backend route to correct collection\r\n            const queryParams = category ? `?category=${encodeURIComponent(category)}` : '';\r\n            const response = await fetch(`${API_BASE}/api/engagement/articles/${articleId}/stats${queryParams}`);\r\n\r\n            if (!response.ok) {\r\n                // If 404, it just means no stats yet, return 0s\r\n                if (response.status === 404) {\r\n                    setStats({\r\n                        article_id: articleId,\r\n                        likes: 0,\r\n                        dislikes: 0,\r\n                        views: 0,\r\n                        success: true\r\n                    });\r\n                    return;\r\n                }\r\n                throw new Error(`Failed to fetch stats: ${response.statusText}`);\r\n            }\r\n\r\n            const data: EngagementStats = await response.json();\r\n            setStats(data);\r\n        } catch (err) {\r\n            const errorMessage = err instanceof Error ? err.message : 'Unknown error';\r\n            console.error('Failed to fetch engagement stats:', errorMessage);\r\n            setError(errorMessage);\r\n            // Non-blocking error for stats\r\n            setStats({\r\n                article_id: articleId,\r\n                likes: 0,\r\n                dislikes: 0,\r\n                views: 0,\r\n                success: false\r\n            });\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [articleId, API_BASE]);\r\n\r\n    // Like article\r\n    const like = useCallback(async () => {\r\n        if (!articleId) return;\r\n\r\n        try {\r\n            const response = await fetch(`${API_BASE}/api/engagement/articles/${articleId}/like`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(getRequestBody()),\r\n            });\r\n\r\n            if (!response.ok) throw new Error('Failed to like article');\r\n            const data = await response.json();\r\n            setStats((prev) => prev ? { ...prev, likes: data.likes } : null);\r\n        } catch (err) {\r\n            console.error('Failed to like article:', err);\r\n            setError('Failed to like article');\r\n        }\r\n    }, [articleId, API_BASE, articleUrl, title, image, category]);\r\n\r\n    // Dislike article\r\n    const dislike = useCallback(async () => {\r\n        if (!articleId) return;\r\n\r\n        try {\r\n            const response = await fetch(`${API_BASE}/api/engagement/articles/${articleId}/dislike`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(getRequestBody()),\r\n            });\r\n\r\n            if (!response.ok) throw new Error('Failed to dislike article');\r\n            const data = await response.json();\r\n            setStats((prev) => prev ? { ...prev, dislikes: data.dislikes } : null);\r\n        } catch (err) {\r\n            console.error('Failed to dislike article:', err);\r\n            setError('Failed to dislike article');\r\n        }\r\n    }, [articleId, API_BASE, articleUrl, title, image, category]);\r\n\r\n    // Track view\r\n    const trackView = useCallback(async () => {\r\n        if (!articleId) return;\r\n\r\n        try {\r\n            await fetch(`${API_BASE}/api/engagement/articles/${articleId}/view`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(getRequestBody()),\r\n            });\r\n            await fetchStats();\r\n        } catch (err) {\r\n            console.debug('Failed to track view:', err);\r\n        }\r\n    }, [articleId, API_BASE, fetchStats, articleUrl, title, image, category]);\r\n\r\n    // Auto-fetch stats when article ID is ready\r\n    useEffect(() => {\r\n        if (articleId) {\r\n            fetchStats();\r\n        }\r\n    }, [articleId, fetchStats]);\r\n\r\n    // Auto-track view on mount\r\n    // Auto-track view on mount (deduplicated)\r\n    const viewTrackedRef = useRef(false);\r\n\r\n    useEffect(() => {\r\n        // Reset tracker if articleId changes\r\n        viewTrackedRef.current = false;\r\n    }, [articleId]);\r\n\r\n    useEffect(() => {\r\n        if (articleId && autoTrackView && !viewTrackedRef.current) {\r\n            // Track view after a small delay to avoid tracking bots\r\n            const timer = setTimeout(() => {\r\n                if (!viewTrackedRef.current) {\r\n                    trackView();\r\n                    viewTrackedRef.current = true;\r\n                }\r\n            }, 1000);\r\n\r\n            return () => clearTimeout(timer);\r\n        }\r\n    }, [articleId, autoTrackView, trackView]);\r\n\r\n    return {\r\n        stats,\r\n        loading,\r\n        error,\r\n        like,\r\n        dislike,\r\n        trackView,\r\n        refetch: fetchStats,\r\n    };\r\n}\r\n\r\n/**\r\n * Hook for batch fetching engagement stats for multiple articles.\r\n * Useful for article lists/grids.\r\n * \r\n * @param articleUrls - Array of article URLs\r\n * @returns Map of URL to engagement stats\r\n */\r\nexport function useBatchEngagement(articleUrls: string[]) {\r\n    const [statsMap, setStatsMap] = useState<Map<string, EngagementStats>>(new Map());\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    useEffect(() => {\r\n        if (!articleUrls.length) return;\r\n\r\n        const fetchBatchStats = async () => {\r\n            setLoading(true);\r\n            const newStatsMap = new Map<string, EngagementStats>();\r\n\r\n            const API_BASE = typeof window !== 'undefined' ? '/pulse' : (process.env.NEXT_PUBLIC_PULSE_API_URL || 'http://localhost:8000');\r\n            await Promise.all(\r\n                articleUrls.map(async (url) => {\r\n                    try {\r\n                        const articleId = await generateArticleId(url);\r\n                        const response = await fetch(`${API_BASE}/api/engagement/articles/${articleId}/stats`);\r\n\r\n                        if (response.ok) {\r\n                            const data = await response.json();\r\n                            newStatsMap.set(url, data);\r\n                        }\r\n                    } catch (err) {\r\n                        console.debug(`Failed to fetch stats for ${url}:`, err);\r\n                    }\r\n                })\r\n            );\r\n\r\n            setStatsMap(newStatsMap);\r\n            setLoading(false);\r\n        };\r\n\r\n        fetchBatchStats();\r\n    }, [articleUrls]);\r\n\r\n    return { statsMap, loading };\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1013, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dell/Desktop/Segmento-app-website-dev/frontend/apps/pulse/components/ArticleInteraction.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { Heart, ThumbsDown, Eye, Share2 } from 'lucide-react';\r\nimport { useEngagement } from '@/hooks/useEngagement';\r\n\r\ninterface ArticleInteractionProps {\r\n    articleUrl: string;\r\n    articleTitle?: string;\r\n    category?: string; // NEW: Pass category for strict routing\r\n    articleId?: string; // NEW: Direct ID from backend\r\n    onCommentClick?: () => void;\r\n    autoTrackView?: boolean;\r\n}\r\n\r\nexport default function ArticleInteraction({\r\n    articleUrl,\r\n    articleTitle,\r\n    category,\r\n    articleId,\r\n    onCommentClick,\r\n    autoTrackView = true\r\n}: ArticleInteractionProps) {\r\n    // Pass category, title, and image to hook to ensure backend can create article if missing\r\n    // Pass articleId to bypass local generation if available\r\n    const { stats, loading, like, dislike, error } = useEngagement(articleUrl, category, articleTitle, undefined, autoTrackView, articleId);\r\n\r\n    // Share functionality\r\n    const handleShare = async () => {\r\n        if (navigator.share) {\r\n            try {\r\n                await navigator.share({\r\n                    title: articleTitle || \"Check out this article\",\r\n                    url: articleUrl,\r\n                });\r\n            } catch (err) {\r\n                console.debug(\"Share cancelled:\", err);\r\n            }\r\n        } else {\r\n            // Fallback: copy to clipboard\r\n            try {\r\n                await navigator.clipboard.writeText(articleUrl);\r\n                alert(\"Link copied to clipboard!\");\r\n            } catch (err) {\r\n                console.error(\"Failed to copy:\", err);\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex items-center gap-6 py-4 border-y border-gray-100 my-6\">\r\n            {/* Like Button */}\r\n            <button\r\n                onClick={like}\r\n                disabled={loading}\r\n                className=\"flex items-center gap-2 transition-colors text-gray-500 hover:text-red-500 disabled:opacity-50 group\"\r\n                aria-label=\"Like article\"\r\n            >\r\n                <Heart\r\n                    className=\"w-5 h-5 group-hover:scale-110 transition-transform\"\r\n                />\r\n                <span className=\"font-medium text-sm\">\r\n                    {loading ? \"...\" : (stats?.likes || 0)}\r\n                </span>\r\n            </button>\r\n\r\n            {/* Dislike Button */}\r\n            <button\r\n                onClick={dislike}\r\n                disabled={loading}\r\n                className=\"flex items-center gap-2 transition-colors text-gray-500 hover:text-blue-600 disabled:opacity-50 group\"\r\n                aria-label=\"Dislike article\"\r\n            >\r\n                <ThumbsDown className=\"w-5 h-5 group-hover:scale-110 transition-transform\" />\r\n                <span className=\"font-medium text-sm\">\r\n                    {loading ? \"...\" : (stats?.dislikes || 0)}\r\n                </span>\r\n            </button>\r\n\r\n            {/* Views Display */}\r\n            <div className=\"flex items-center gap-2 text-gray-500\">\r\n                <Eye className=\"w-5 h-5\" />\r\n                <span className=\"font-medium text-sm\">\r\n                    {loading ? \"...\" : (stats?.views || 0)}\r\n                </span>\r\n            </div>\r\n\r\n            {/* Share Button */}\r\n            <button\r\n                onClick={handleShare}\r\n                className=\"flex items-center gap-2 text-gray-500 hover:text-green-500 transition-colors group ml-auto\"\r\n                aria-label=\"Share article\"\r\n            >\r\n                <Share2 className=\"w-5 h-5 group-hover:scale-110 transition-transform\" />\r\n                <span className=\"font-medium text-sm\">Share</span>\r\n            </button>\r\n\r\n            {/* Error Display (development only) */}\r\n            {error && process.env.NODE_ENV === 'development' && (\r\n                <span className=\"text-xs text-red-500 ml-2\">‚ö†Ô∏è {error}</span>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AACA;AAHA;;;;AAce,SAAS,mBAAmB,EACvC,UAAU,EACV,YAAY,EACZ,QAAQ,EACR,SAAS,EACT,cAAc,EACd,gBAAgB,IAAI,EACE;IACtB,0FAA0F;IAC1F,yDAAyD;IACzD,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,GAAG,IAAA,wJAAa,EAAC,YAAY,UAAU,cAAc,WAAW,eAAe;IAE7H,sBAAsB;IACtB,MAAM,cAAc;QAChB,IAAI,UAAU,KAAK,EAAE;YACjB,IAAI;gBACA,MAAM,UAAU,KAAK,CAAC;oBAClB,OAAO,gBAAgB;oBACvB,KAAK;gBACT;YACJ,EAAE,OAAO,KAAK;gBACV,QAAQ,KAAK,CAAC,oBAAoB;YACtC;QACJ,OAAO;YACH,8BAA8B;YAC9B,IAAI;gBACA,MAAM,UAAU,SAAS,CAAC,SAAS,CAAC;gBACpC,MAAM;YACV,EAAE,OAAO,KAAK;gBACV,QAAQ,KAAK,CAAC,mBAAmB;YACrC;QACJ;IACJ;IAEA,qBACI,8OAAC;QAAI,WAAU;;0BAEX,8OAAC;gBACG,SAAS;gBACT,UAAU;gBACV,WAAU;gBACV,cAAW;;kCAEX,8OAAC,6MAAK;wBACF,WAAU;;;;;;kCAEd,8OAAC;wBAAK,WAAU;kCACX,UAAU,QAAS,OAAO,SAAS;;;;;;;;;;;;0BAK5C,8OAAC;gBACG,SAAS;gBACT,UAAU;gBACV,WAAU;gBACV,cAAW;;kCAEX,8OAAC,gOAAU;wBAAC,WAAU;;;;;;kCACtB,8OAAC;wBAAK,WAAU;kCACX,UAAU,QAAS,OAAO,YAAY;;;;;;;;;;;;0BAK/C,8OAAC;gBAAI,WAAU;;kCACX,8OAAC,uMAAG;wBAAC,WAAU;;;;;;kCACf,8OAAC;wBAAK,WAAU;kCACX,UAAU,QAAS,OAAO,SAAS;;;;;;;;;;;;0BAK5C,8OAAC;gBACG,SAAS;gBACT,WAAU;gBACV,cAAW;;kCAEX,8OAAC,oNAAM;wBAAC,WAAU;;;;;;kCAClB,8OAAC;wBAAK,WAAU;kCAAsB;;;;;;;;;;;;YAIzC,SAAS,oDAAyB,+BAC/B,8OAAC;gBAAK,WAAU;;oBAA4B;oBAAI;;;;;;;;;;;;;AAIhE"}},
    {"offset": {"line": 1181, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dell/Desktop/Segmento-app-website-dev/frontend/apps/pulse/components/CommentSection.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { Send } from 'lucide-react';\r\nimport { subscribeToComments, addComment, type Comment } from '@/lib/analytics';\r\n\r\ninterface CommentSectionProps {\r\n    articleUrl: string;\r\n}\r\n\r\nexport default function CommentSection({ articleUrl }: CommentSectionProps) {\r\n    const [comments, setComments] = useState<Comment[]>([]);\r\n    const [newComment, setNewComment] = useState('');\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const unsubscribe = subscribeToComments(articleUrl, (updatedComments) => {\r\n            setComments(updatedComments);\r\n        });\r\n        return () => unsubscribe();\r\n    }, [articleUrl]);\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!newComment.trim()) return;\r\n\r\n        setIsSubmitting(true);\r\n        try {\r\n            await addComment(articleUrl, newComment.trim());\r\n            setNewComment('');\r\n        } catch (error) {\r\n            console.error('Failed to post comment', error);\r\n        } finally {\r\n            setIsSubmitting(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"mt-8 bg-gray-50 rounded-xl p-6\">\r\n            <h3 className=\"text-lg font-bold mb-6\">Discussion ({comments.length})</h3>\r\n\r\n            {/* Comment Form */}\r\n            <form onSubmit={handleSubmit} className=\"mb-8 relative\">\r\n                <textarea\r\n                    value={newComment}\r\n                    onChange={(e) => setNewComment(e.target.value)}\r\n                    placeholder=\"Share your thoughts...\"\r\n                    className=\"w-full p-4 rounded-lg border border-gray-200 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none resize-none bg-white min-h-25\"\r\n                />\r\n                <button\r\n                    type=\"submit\"\r\n                    disabled={!newComment.trim() || isSubmitting}\r\n                    className=\"absolute bottom-4 right-4 bg-blue-600 text-white p-2 rounded-full hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n                >\r\n                    <Send className=\"w-4 h-4\" />\r\n                </button>\r\n            </form>\r\n\r\n            {/* Comments List */}\r\n            <div className=\"space-y-6\">\r\n                {comments.length === 0 ? (\r\n                    <p className=\"text-center text-gray-500 py-4\">Be the first to comment!</p>\r\n                ) : (\r\n                    comments.map((comment) => (\r\n                        <div key={comment.id} className=\"flex gap-4\">\r\n                            <div className=\"w-8 h-8 rounded-full bg-linear-to-br from-blue-500 to-purple-500 flex items-center justify-center text-white font-bold text-xs shrink-0\">\r\n                                {comment.userName.charAt(0)}\r\n                            </div>\r\n                            <div className=\"flex-1\">\r\n                                <div className=\"flex items-center gap-2 mb-1\">\r\n                                    <span className=\"font-semibold text-sm\">{comment.userName}</span>\r\n                                    <span className=\"text-xs text-gray-400\">\r\n                                        {new Date(comment.createdAt).toLocaleDateString()}\r\n                                    </span>\r\n                                </div>\r\n                                <p className=\"text-gray-700 text-sm whitespace-pre-wrap\">{comment.text}</p>\r\n                            </div>\r\n                        </div>\r\n                    ))\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAUe,SAAS,eAAe,EAAE,UAAU,EAAuB;IACtE,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAY,EAAE;IACtD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAC7C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IAEjD,IAAA,kNAAS,EAAC;QACN,MAAM,cAAc,IAAA,wJAAmB,EAAC,YAAY,CAAC;YACjD,YAAY;QAChB;QACA,OAAO,IAAM;IACjB,GAAG;QAAC;KAAW;IAEf,MAAM,eAAe,OAAO;QACxB,EAAE,cAAc;QAChB,IAAI,CAAC,WAAW,IAAI,IAAI;QAExB,gBAAgB;QAChB,IAAI;YACA,MAAM,IAAA,+IAAU,EAAC,YAAY,WAAW,IAAI;YAC5C,cAAc;QAClB,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,0BAA0B;QAC5C,SAAU;YACN,gBAAgB;QACpB;IACJ;IAEA,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAG,WAAU;;oBAAyB;oBAAa,SAAS,MAAM;oBAAC;;;;;;;0BAGpE,8OAAC;gBAAK,UAAU;gBAAc,WAAU;;kCACpC,8OAAC;wBACG,OAAO;wBACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;wBAC7C,aAAY;wBACZ,WAAU;;;;;;kCAEd,8OAAC;wBACG,MAAK;wBACL,UAAU,CAAC,WAAW,IAAI,MAAM;wBAChC,WAAU;kCAEV,cAAA,8OAAC,0MAAI;4BAAC,WAAU;;;;;;;;;;;;;;;;;0BAKxB,8OAAC;gBAAI,WAAU;0BACV,SAAS,MAAM,KAAK,kBACjB,8OAAC;oBAAE,WAAU;8BAAiC;;;;;2BAE9C,SAAS,GAAG,CAAC,CAAC,wBACV,8OAAC;wBAAqB,WAAU;;0CAC5B,8OAAC;gCAAI,WAAU;0CACV,QAAQ,QAAQ,CAAC,MAAM,CAAC;;;;;;0CAE7B,8OAAC;gCAAI,WAAU;;kDACX,8OAAC;wCAAI,WAAU;;0DACX,8OAAC;gDAAK,WAAU;0DAAyB,QAAQ,QAAQ;;;;;;0DACzD,8OAAC;gDAAK,WAAU;0DACX,IAAI,KAAK,QAAQ,SAAS,EAAE,kBAAkB;;;;;;;;;;;;kDAGvD,8OAAC;wCAAE,WAAU;kDAA6C,QAAQ,IAAI;;;;;;;;;;;;;uBAXpE,QAAQ,EAAE;;;;;;;;;;;;;;;;AAmB5C"}},
    {"offset": {"line": 1354, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dell/Desktop/Segmento-app-website-dev/frontend/apps/pulse/components/ViewCounter.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { Eye } from 'lucide-react';\r\nimport { getArticleViewCount } from '@/lib/analytics';\r\n\r\ninterface ViewCounterProps {\r\n    articleUrl: string;\r\n    articleId?: string;  // NEW: Authoritative ID from backend (recommended)\r\n    className?: string;\r\n}\r\n\r\nexport default function ViewCounter({ articleUrl, articleId, className = '' }: ViewCounterProps) {\r\n    const [viewCount, setViewCount] = useState<number>(0);\r\n    // Remove loading state for cleaner UI in lists (optional, or keep it)\r\n\r\n    useEffect(() => {\r\n        let isMounted = true;\r\n        const fetchCount = async () => {\r\n            const count = await getArticleViewCount(articleUrl, articleId);\r\n            if (isMounted) setViewCount(count);\r\n        };\r\n        fetchCount();\r\n        return () => { isMounted = false; };\r\n    }, [articleUrl, articleId]);\r\n\r\n    return (\r\n        <div className={`flex items-center gap-1 text-xs text-gray-500 ${className}`}>\r\n            <Eye className=\"w-3 h-3\" />\r\n            <span>{viewCount.toLocaleString()}</span>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAYe,SAAS,YAAY,EAAE,UAAU,EAAE,SAAS,EAAE,YAAY,EAAE,EAAoB;IAC3F,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAS;IACnD,sEAAsE;IAEtE,IAAA,kNAAS,EAAC;QACN,IAAI,YAAY;QAChB,MAAM,aAAa;YACf,MAAM,QAAQ,MAAM,IAAA,wJAAmB,EAAC,YAAY;YACpD,IAAI,WAAW,aAAa;QAChC;QACA;QACA,OAAO;YAAQ,YAAY;QAAO;IACtC,GAAG;QAAC;QAAY;KAAU;IAE1B,qBACI,8OAAC;QAAI,WAAW,CAAC,8CAA8C,EAAE,WAAW;;0BACxE,8OAAC,uMAAG;gBAAC,WAAU;;;;;;0BACf,8OAAC;0BAAM,UAAU,cAAc;;;;;;;;;;;;AAG3C"}},
    {"offset": {"line": 1412, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dell/Desktop/Segmento-app-website-dev/frontend/apps/pulse/components/AudioSummaryButton.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useRef, useEffect, useCallback } from 'react';\r\nimport { Headphones, Loader2, Volume2, Play, Pause } from 'lucide-react';\r\nimport { cn } from '@/shared/utils';\r\n\r\n\r\ninterface AudioSummaryButtonProps {\r\n    articleId: string;\r\n    articleUrl: string;\r\n    initialAudioUrl?: string;\r\n    initialTextSummary?: string;\r\n    title: string;\r\n    image: string;\r\n    category: string;\r\n    className?: string;\r\n}\r\n\r\ninterface FloatingNote {\r\n    id: number;\r\n    emoji: string;\r\n    x: number;\r\n    y: number;\r\n    rotate: number;\r\n}\r\n\r\nconst CATCHY_MESSAGES = [\r\n    \"üéß Too lazy to read? We got you!\",\r\n    \"üëÇ Your ears will thank you\",\r\n    \"üé∂ Turn words into vibes\",\r\n    \"‚ö° 5 min summary, 0 effort\",\r\n    \"üî• Listen while you scroll\",\r\n    \"‚ú® Audio magic incoming\",\r\n    \"üöÄ From article to audio in seconds\",\r\n    \"üí´ Multitask like a boss\"\r\n];\r\n\r\nconst MUSIC_EMOJIS = [\"üéµ\", \"üé∂\", \"üéº\", \"‚ô™\", \"‚ô´\", \"üéß\"];\r\n\r\nexport default function AudioSummaryButton({\r\n    articleId,\r\n    articleUrl,\r\n    initialAudioUrl,\r\n    initialTextSummary,\r\n    title,\r\n    image,\r\n    category,\r\n    className\r\n}: AudioSummaryButtonProps) {\r\n    const [audioUrl, setAudioUrl] = useState<string | null>(initialAudioUrl || null);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [isPlaying, setIsPlaying] = useState(false);\r\n    const [messageIndex, setMessageIndex] = useState(0);\r\n    const [isFading, setIsFading] = useState(false);\r\n    const [floatingNotes, setFloatingNotes] = useState<FloatingNote[]>([]);\r\n    const [showPulseRing, setShowPulseRing] = useState(false);\r\n    const [isHovered, setIsHovered] = useState(false);\r\n\r\n    const audioRef = useRef<HTMLAudioElement | null>(null);\r\n    const noteIdCounter = useRef(0);\r\n    const spawnInterval = useRef<NodeJS.Timeout | null>(null);\r\n\r\n    // If it's a research paper (category starts with 'research-'), disable and show \"Coming Soon\"\r\n    const isResearch = category?.toLowerCase().startsWith('research') || false;\r\n\r\n    // Initialize audio element\r\n    useEffect(() => {\r\n        if (!audioRef.current) {\r\n            audioRef.current = new Audio();\r\n            audioRef.current.onended = () => setIsPlaying(false);\r\n            audioRef.current.onerror = () => {\r\n                console.error(\"Audio playback error\");\r\n                setIsPlaying(false);\r\n                setIsLoading(false);\r\n            };\r\n        }\r\n\r\n        return () => {\r\n            if (audioRef.current) {\r\n                audioRef.current.pause();\r\n                audioRef.current = null;\r\n            }\r\n        };\r\n    }, []);\r\n\r\n    // Rotate messages every 3.5 seconds\r\n    useEffect(() => {\r\n        const messageTimer = setInterval(() => {\r\n            setIsFading(true);\r\n            setTimeout(() => {\r\n                setMessageIndex((prev) => (prev + 1) % CATCHY_MESSAGES.length);\r\n                setIsFading(false);\r\n            }, 400); // Fade duration\r\n        }, 3500);\r\n\r\n        return () => clearInterval(messageTimer);\r\n    }, []);\r\n\r\n    // Spawn floating notes continuously\r\n    const spawnNote = useCallback(() => {\r\n        const note: FloatingNote = {\r\n            id: noteIdCounter.current++,\r\n            emoji: MUSIC_EMOJIS[Math.floor(Math.random() * MUSIC_EMOJIS.length)],\r\n            x: Math.random() * 100 - 50, // -50 to 50\r\n            y: Math.random() * 80 + 40, // 40 to 120\r\n            rotate: Math.random() * 360\r\n        };\r\n\r\n        setFloatingNotes(prev => [...prev, note]);\r\n\r\n        // Auto-cleanup after 2 seconds\r\n        setTimeout(() => {\r\n            setFloatingNotes(prev => prev.filter(n => n.id !== note.id));\r\n        }, 2000);\r\n    }, []);\r\n\r\n    // Continuous note spawning based on state\r\n    useEffect(() => {\r\n        let interval = 700; // Default\r\n        if (isLoading) interval = 150;\r\n        else if (isHovered) interval = 300;\r\n\r\n        if (spawnInterval.current) clearInterval(spawnInterval.current);\r\n\r\n        spawnInterval.current = setInterval(spawnNote, interval);\r\n\r\n        return () => {\r\n            if (spawnInterval.current) clearInterval(spawnInterval.current);\r\n        };\r\n    }, [isLoading, isHovered, spawnNote]);\r\n\r\n    // Cleanup old notes (safety check)\r\n    useEffect(() => {\r\n        const cleanup = setInterval(() => {\r\n            setFloatingNotes(prev => prev.slice(-14)); // Keep max 14\r\n        }, 1000);\r\n\r\n        return () => clearInterval(cleanup);\r\n    }, []);\r\n\r\n    const burstNotes = () => {\r\n        const angles = [0, 45, 90, 135, 180, 225, 270, 315];\r\n        const distance = 80;\r\n\r\n        angles.forEach(angle => {\r\n            const rad = (angle * Math.PI) / 180;\r\n            const note: FloatingNote = {\r\n                id: noteIdCounter.current++,\r\n                emoji: MUSIC_EMOJIS[Math.floor(Math.random() * MUSIC_EMOJIS.length)],\r\n                x: Math.cos(rad) * distance,\r\n                y: Math.sin(rad) * distance,\r\n                rotate: angle\r\n            };\r\n\r\n            setFloatingNotes(prev => [...prev, note]);\r\n            setTimeout(() => {\r\n                setFloatingNotes(prev => prev.filter(n => n.id !== note.id));\r\n            }, 2000);\r\n        });\r\n    };\r\n\r\n    const [textSummary, setTextSummary] = useState<string | null>(initialAudioUrl && initialTextSummary ? initialTextSummary : null);\r\n\r\n    // If initialAudioUrl is present, set textSummary if provided\r\n    useEffect(() => {\r\n        if (initialAudioUrl && initialTextSummary) {\r\n            setTextSummary(initialTextSummary);\r\n        }\r\n    }, [initialAudioUrl, initialTextSummary]);\r\n\r\n    // Check status on mount if data is missing (Automatic Retrieval)\r\n    useEffect(() => {\r\n        if (!initialAudioUrl && !initialTextSummary) {\r\n            const checkStatus = async () => {\r\n                try {\r\n                    const encodedUrl = encodeURIComponent(articleUrl);\r\n                    const encodedCategory = category ? encodeURIComponent(category) : '';\r\n                    const API_BASE = typeof window !== 'undefined' ? '/pulse' : (process.env.NEXT_PUBLIC_PULSE_API_URL || 'http://localhost:8000');\r\n                    const res = await fetch(`${API_BASE}/api/audio/status?article_url=${encodedUrl}&category=${encodedCategory}`);\r\n                    const data = await res.json();\r\n\r\n                    if (data.success) {\r\n                        if (data.audio_url) setAudioUrl(data.audio_url);\r\n                        if (data.text_summary) setTextSummary(data.text_summary);\r\n                    }\r\n                } catch (err) {\r\n                    console.error(\"Failed to check audio status\", err);\r\n                }\r\n            };\r\n            checkStatus();\r\n        }\r\n    }, [articleUrl, category, initialAudioUrl, initialTextSummary]);\r\n\r\n    const handleClick = async (e: React.MouseEvent) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n\r\n        if (isResearch) {\r\n            return;\r\n        }\r\n\r\n        if (isLoading) return;\r\n\r\n        // Show pulse ring\r\n        setShowPulseRing(true);\r\n        setTimeout(() => setShowPulseRing(false), 1000);\r\n\r\n        // Burst notes\r\n        burstNotes();\r\n\r\n        // If playing, pause\r\n        if (isPlaying && audioRef.current) {\r\n            audioRef.current.pause();\r\n            setIsPlaying(false);\r\n            return;\r\n        }\r\n\r\n        // If audio exists but stopped, play\r\n        if (audioUrl && audioRef.current) {\r\n            if (audioRef.current.src !== audioUrl) {\r\n                audioRef.current.src = audioUrl;\r\n            }\r\n            try {\r\n                await audioRef.current.play();\r\n                setIsPlaying(true);\r\n            } catch (err) {\r\n                console.error(\"Play failed\", err);\r\n            }\r\n            return;\r\n        }\r\n\r\n        // Generate audio\r\n        setIsLoading(true);\r\n        try {\r\n            const API_BASE = typeof window !== 'undefined' ? '/pulse' : (process.env.NEXT_PUBLIC_PULSE_API_URL || 'http://localhost:8000');\r\n            const response = await fetch(`${API_BASE}/api/audio/generate`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    article_url: articleUrl,\r\n                    title: title,\r\n                    image_url: image,\r\n                    category: category\r\n                })\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (data.success && data.audio_url) {\r\n                setAudioUrl(data.audio_url);\r\n                if (data.text_summary) setTextSummary(data.text_summary);\r\n\r\n                if (audioRef.current) {\r\n                    audioRef.current.src = data.audio_url;\r\n                    await audioRef.current.play();\r\n                    setIsPlaying(true);\r\n                }\r\n            } else {\r\n                const errorMsg = data.message || data.detail || \"Unknown error occurred\";\r\n                console.error(\"Audio generation failed\", errorMsg);\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Audio fetch error\", error);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n\r\n    return (\r\n        <div className={cn(\"flex flex-col items-center gap-2 py-6\", className)}>\r\n            {/* Main Button Container */}\r\n            <div className=\"relative group\">\r\n                {/* Rotating Message Bubble - Now Top Right */}\r\n                <div className=\"absolute -top-14 -right-12 hidden md:block z-20\"> {/* Hidden on mobile, top-right position */}\r\n                    <div\r\n                        className={cn(\r\n                            \"px-4 py-2 rounded-xl border border-purple-200 bg-gradient-to-br from-purple-50 to-pink-50 shadow-sm transition-all duration-400\",\r\n                            isFading ? \"opacity-0 translate-y-1\" : \"opacity-100 translate-y-0\"\r\n                        )}\r\n                    >\r\n                        <p className=\"text-sm font-medium text-gray-700 whitespace-nowrap\">\r\n                            {CATCHY_MESSAGES[messageIndex]}\r\n                        </p>\r\n                    </div>\r\n                    {/* Triangular tail pointing down-left to the button */}\r\n                    <div className=\"absolute left-4 -bottom-1.5 w-3 h-3 bg-gradient-to-br from-pink-50 to-purple-50 border-b border-r border-purple-200 rotate-45 transform\" />\r\n                </div>\r\n\r\n                {/* Ambient Glow Layer */}\r\n                <div className=\"absolute inset-0 rounded-2xl blur-xl animate-glow-pulse pointer-events-none\"\r\n                    style={{ background: 'var(--gradient-audio)' }} />\r\n\r\n                {/* Pulse Ring */}\r\n                {showPulseRing && (\r\n                    <div className=\"absolute inset-0 rounded-2xl animate-pulse-ring pointer-events-none\"\r\n                        style={{ background: 'var(--gradient-audio)' }} />\r\n                )}\r\n\r\n                {/* Floating Notes */}\r\n                {floatingNotes.map(note => (\r\n                    <div\r\n                        key={note.id}\r\n                        className=\"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none text-4xl animate-float-note\"\r\n                        style={{\r\n                            '--float-x': `${note.x}px`,\r\n                            '--float-y': `${note.y}px`,\r\n                            '--float-rotate': `${note.rotate}deg`,\r\n                            zIndex: 10\r\n                        } as React.CSSProperties}\r\n                    >\r\n                        {note.emoji}\r\n                    </div>\r\n                ))}\r\n\r\n                {/* Main Button */}\r\n                <button\r\n                    onClick={handleClick}\r\n                    onMouseEnter={() => setIsHovered(true)}\r\n                    onMouseLeave={() => setIsHovered(false)}\r\n                    disabled={isResearch}\r\n                    className={cn(\r\n                        \"relative px-7 py-3.5 rounded-2xl font-semibold text-gray-800 border border-purple-200/50\",\r\n                        \"transition-all duration-300 ease-out\",\r\n                        \"hover:scale-105 hover:-translate-y-0.5\",\r\n                        \"active:scale-100 active:translate-y-0\",\r\n                        \"focus:outline-none focus:ring-2 focus:ring-purple-400 focus:ring-offset-2\",\r\n                        \"animate-button-breathe flex items-center gap-3\",\r\n                        isResearch ? \"opacity-70 cursor-not-allowed\" : \"\"\r\n                    )}\r\n                    style={{ background: 'var(--gradient-audio)' }}\r\n                    aria-label=\"Play Audio Summary\"\r\n                >\r\n                    {/* Icon */}\r\n                    <div className={cn(isLoading ? \"animate-spin\" : \"animate-gentle-bob\")}>\r\n                        {isLoading ? (\r\n                            <Loader2 className=\"w-5 h-5\" />\r\n                        ) : isPlaying ? (\r\n                            <Pause className=\"w-5 h-5\" />\r\n                        ) : audioUrl ? ( // If audio is ready but paused/stopped\r\n                            <Play className=\"w-5 h-5\" />\r\n                        ) : (\r\n                            <Headphones className=\"w-5 h-5\" />\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Text */}\r\n                    <span>\r\n                        {isLoading ? \"Generating...\" :\r\n                            isPlaying ? \"Pause\" :\r\n                                audioUrl ? \"Resume\" :\r\n                                    \"Audio Summary\"}\r\n                    </span>\r\n\r\n                    {/* Equalizer Bars */}\r\n                    {!isLoading && (\r\n                        <div className=\"flex items-center gap-0.5 h-4\">\r\n                            {[0, 1, 2, 3].map(i => (\r\n                                <div\r\n                                    key={i}\r\n                                    className=\"w-[3px] rounded-full bg-purple-500 animate-eq-bar\"\r\n                                    style={{ animationDelay: `${i * 0.15}s` }}\r\n                                />\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </button>\r\n\r\n                {/* Tooltip for Research Papers */}\r\n                {isResearch && (\r\n                    <div className=\"absolute -top-10 left-1/2 transform -translate-x-1/2 bg-black/80 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none z-50\">\r\n                        Coming Soon\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Bottom Sub-label */}\r\n            <div className=\"flex items-center gap-1.5 text-xs uppercase tracking-wide text-gray-500 mt-1\">\r\n                <Volume2 className=\"w-3.5 h-3.5 animate-gentle-bob\" />\r\n                <span>Tap to listen 150 words summary</span>\r\n            </div>\r\n\r\n            {/* Text Summary Box */}\r\n            {textSummary && (\r\n                <div className=\"w-full max-w-md mt-4 p-5 rounded-xl bg-purple-50/60 border border-purple-100/50 backdrop-blur-sm text-sm text-gray-700 leading-relaxed max-h-60 overflow-y-auto custom-scrollbar animate-in fade-in slide-in-from-top-2 shadow-sm\">\r\n                    <h4 className=\"font-semibold text-purple-900 mb-3 flex items-center gap-2 text-xs uppercase tracking-wider\">\r\n                        <span className=\"text-base\">üìù</span>\r\n                        Quick Summary\r\n                    </h4>\r\n                    <p className=\"whitespace-pre-wrap\">{textSummary}</p>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1895, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dell/Desktop/Segmento-app-website-dev/frontend/apps/pulse/components/ArticleDetailView.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useRef } from 'react';\r\nimport Link from 'next/link';\r\nimport { ArrowLeft, ExternalLink } from 'lucide-react';\r\nimport TimeDisplay from '@/components/TimeDisplay';\r\nimport ArticleInteraction from '@/components/ArticleInteraction';\r\nimport CommentSection from '@/components/CommentSection';\r\nimport ViewCounter from '@/components/ViewCounter';\r\nimport { incrementArticleView } from '@/lib/analytics';\r\nimport AudioSummaryButton from '@/components/AudioSummaryButton';\r\nimport { Article } from '@/lib/newsApi';\r\n\r\ninterface ArticleDetailViewProps {\r\n    article: {\r\n        url: string;\r\n        title: string;\r\n        description: string;\r\n        image_url: string;\r\n        published_at: string;\r\n        source: string;\r\n        category: string;\r\n        id: string; // Appwrite ID\r\n        audio_url?: string;\r\n        text_summary?: string;\r\n    };\r\n    isModal?: boolean; // If true, disables view tracking and back button\r\n    onClose?: () => void;\r\n    backLink?: string;\r\n    backLabel?: string;\r\n}\r\n\r\nexport default function ArticleDetailView({ article, isModal = false, onClose, ...props }: ArticleDetailViewProps) {\r\n    const hasIncrementedRef = useRef(false);\r\n\r\n    useEffect(() => {\r\n        // Only track view if NOT in modal mode and haven't tracked yet\r\n        if (!isModal && article.url && !hasIncrementedRef.current) {\r\n            hasIncrementedRef.current = true;\r\n            incrementArticleView(\r\n                article.url,\r\n                article.title,\r\n                article.image_url,\r\n                article.category,\r\n                article.id\r\n            );\r\n        }\r\n    }, [article, isModal]);\r\n\r\n    return (\r\n        <div className={`container mx-auto px-3 xs:px-4 sm:px-4 lg:px-6 py-4 sm:py-6 lg:py-8 max-w-4xl ${isModal ? 'bg-white rounded-2xl' : ''}`}>\r\n            {/* Back Button - Only show if NOT a modal */}\r\n            {!isModal && (\r\n                <Link\r\n                    href={props.backLink || \"/news\"}\r\n                    className=\"inline-flex items-center gap-2 text-gray-500 hover:text-blue-600 mb-8 transition-colors\"\r\n                >\r\n                    <ArrowLeft className=\"w-4 h-4\" />\r\n                    <span>{props.backLabel || \"Back to News\"}</span>\r\n                </Link>\r\n            )}\r\n\r\n            {/* Article Header */}\r\n            <article className={`bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden ${isModal ? 'shadow-none border-none' : ''}`}>\r\n                <div className=\"relative h-[250px] xs:h-[280px] sm:h-[320px] md:h-[360px] lg:h-[400px] w-full\">\r\n                    <img\r\n                        src={article.image_url}\r\n                        alt={article.title}\r\n                        className=\"w-full h-full object-cover\"\r\n                        onError={(e) => { e.currentTarget.src = \"/pulse/placeholder-news.svg\"; }}\r\n                    />\r\n                    <div className=\"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent flex flex-col justify-end p-8\">\r\n                        <div className=\"flex items-center gap-3 text-white/90 mb-3 text-sm\">\r\n                            <span className=\"bg-blue-600 px-3 py-1 rounded-full text-xs font-bold text-white\">\r\n                                {article.source}\r\n                            </span>\r\n                            <TimeDisplay timestamp={article.published_at} className=\"text-white/90\" />\r\n                            <div className=\"flex items-center gap-1\">\r\n                                <span className=\"w-1 h-1 rounded-full bg-white/60\"></span>\r\n                                <ViewCounter\r\n                                    articleUrl={article.url}\r\n                                    articleId={article.id}\r\n                                    className=\"text-white/90\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                        <h1 className=\"text-xl xs:text-2xl sm:text-3xl md:text-3xl lg:text-4xl font-bold text-white mb-2 leading-tight\">\r\n                            {article.title}\r\n                        </h1>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"p-8\">\r\n                    <p className=\"text-base sm:text-lg lg:text-xl text-gray-700 leading-relaxed mb-6 sm:mb-8\">\r\n                        {article.description}\r\n                    </p>\r\n\r\n                    <div className=\"flex flex-col xs:flex-row justify-center mb-6 sm:mb-8 items-center gap-3 sm:gap-4\">\r\n                        <a\r\n                            href={article.url}\r\n                            target=\"_blank\"\r\n                            rel=\"noopener noreferrer\"\r\n                            className=\"w-full xs:w-auto bg-blue-600 hover:bg-blue-700 text-white px-6 sm:px-8 py-2.5 sm:py-3 rounded-xl font-semibold transition-all shadow-lg hover:shadow-blue-500/20 inline-flex items-center justify-center gap-2 transform hover:-translate-y-1 min-h-touch\"\r\n                            onClick={(e) => {\r\n                                // If in modal, maybe we want to close it when they go to source?\r\n                                // For now, let's keep it open or let default behavior happen\r\n                            }}\r\n                        >\r\n                            <span className=\"hidden sm:inline\">Read Full Article at Source</span>\r\n                            <span className=\"inline sm:hidden\">Read Article</span>\r\n                            <ExternalLink className=\"w-4 h-4\" />\r\n                        </a>\r\n\r\n                        {/* Audio Summary Button */}\r\n                        <AudioSummaryButton\r\n                            articleId={article.id || article.url}\r\n                            articleUrl={article.url}\r\n                            initialAudioUrl={article.audio_url}\r\n                            initialTextSummary={article.text_summary}\r\n                            title={article.title}\r\n                            image={article.image_url}\r\n                            category={article.category}\r\n                        />\r\n                    </div>\r\n\r\n                    <ArticleInteraction\r\n                        articleUrl={article.url}\r\n                        articleTitle={article.title}\r\n                        category={article.category}\r\n                        articleId={article.id}\r\n                        autoTrackView={false} // Already handled by parent/page\r\n                    />\r\n\r\n                    {/* Only show comments if NOT in modal to keep it lightweight? \r\n                        User asked for \"Same component\", but comments in a hover modal might be too much.\r\n                        Let's include it for now to be faithful to \"exact same component\" request.\r\n                    */}\r\n                    <CommentSection articleUrl={article.url} />\r\n                </div>\r\n            </article>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;;;;;;;;;;;AAgCe,SAAS,kBAAkB,EAAE,OAAO,EAAE,UAAU,KAAK,EAAE,OAAO,EAAE,GAAG,OAA+B;IAC7G,MAAM,oBAAoB,IAAA,+MAAM,EAAC;IAEjC,IAAA,kNAAS,EAAC;QACN,+DAA+D;QAC/D,IAAI,CAAC,WAAW,QAAQ,GAAG,IAAI,CAAC,kBAAkB,OAAO,EAAE;YACvD,kBAAkB,OAAO,GAAG;YAC5B,IAAA,yJAAoB,EAChB,QAAQ,GAAG,EACX,QAAQ,KAAK,EACb,QAAQ,SAAS,EACjB,QAAQ,QAAQ,EAChB,QAAQ,EAAE;QAElB;IACJ,GAAG;QAAC;QAAS;KAAQ;IAErB,qBACI,8OAAC;QAAI,WAAW,CAAC,8EAA8E,EAAE,UAAU,yBAAyB,IAAI;;YAEnI,CAAC,yBACE,8OAAC,uKAAI;gBACD,MAAM,MAAM,QAAQ,IAAI;gBACxB,WAAU;;kCAEV,8OAAC,6NAAS;wBAAC,WAAU;;;;;;kCACrB,8OAAC;kCAAM,MAAM,SAAS,IAAI;;;;;;;;;;;;0BAKlC,8OAAC;gBAAQ,WAAW,CAAC,sEAAsE,EAAE,UAAU,4BAA4B,IAAI;;kCACnI,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCACG,KAAK,QAAQ,SAAS;gCACtB,KAAK,QAAQ,KAAK;gCAClB,WAAU;gCACV,SAAS,CAAC;oCAAQ,EAAE,aAAa,CAAC,GAAG,GAAG;gCAA+B;;;;;;0CAE3E,8OAAC;gCAAI,WAAU;;kDACX,8OAAC;wCAAI,WAAU;;0DACX,8OAAC;gDAAK,WAAU;0DACX,QAAQ,MAAM;;;;;;0DAEnB,8OAAC,sJAAW;gDAAC,WAAW,QAAQ,YAAY;gDAAE,WAAU;;;;;;0DACxD,8OAAC;gDAAI,WAAU;;kEACX,8OAAC;wDAAK,WAAU;;;;;;kEAChB,8OAAC,sJAAW;wDACR,YAAY,QAAQ,GAAG;wDACvB,WAAW,QAAQ,EAAE;wDACrB,WAAU;;;;;;;;;;;;;;;;;;kDAItB,8OAAC;wCAAG,WAAU;kDACT,QAAQ,KAAK;;;;;;;;;;;;;;;;;;kCAK1B,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAE,WAAU;0CACR,QAAQ,WAAW;;;;;;0CAGxB,8OAAC;gCAAI,WAAU;;kDACX,8OAAC;wCACG,MAAM,QAAQ,GAAG;wCACjB,QAAO;wCACP,KAAI;wCACJ,WAAU;wCACV,SAAS,CAAC;wCACN,iEAAiE;wCACjE,6DAA6D;wCACjE;;0DAEA,8OAAC;gDAAK,WAAU;0DAAmB;;;;;;0DACnC,8OAAC;gDAAK,WAAU;0DAAmB;;;;;;0DACnC,8OAAC,sOAAY;gDAAC,WAAU;;;;;;;;;;;;kDAI5B,8OAAC,6JAAkB;wCACf,WAAW,QAAQ,EAAE,IAAI,QAAQ,GAAG;wCACpC,YAAY,QAAQ,GAAG;wCACvB,iBAAiB,QAAQ,SAAS;wCAClC,oBAAoB,QAAQ,YAAY;wCACxC,OAAO,QAAQ,KAAK;wCACpB,OAAO,QAAQ,SAAS;wCACxB,UAAU,QAAQ,QAAQ;;;;;;;;;;;;0CAIlC,8OAAC,6JAAkB;gCACf,YAAY,QAAQ,GAAG;gCACvB,cAAc,QAAQ,KAAK;gCAC3B,UAAU,QAAQ,QAAQ;gCAC1B,WAAW,QAAQ,EAAE;gCACrB,eAAe;;;;;;0CAOnB,8OAAC,yJAAc;gCAAC,YAAY,QAAQ,GAAG;;;;;;;;;;;;;;;;;;;;;;;;AAK3D"}},
    {"offset": {"line": 2164, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dell/Desktop/Segmento-app-website-dev/frontend/apps/pulse/components/NewsCard.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useRef, useEffect } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport Link from \"next/link\";\r\nimport { ExternalLink, X } from \"lucide-react\";\r\nimport TimeDisplay from \"@/components/TimeDisplay\";\r\nimport CardEngagementStats from \"@/components/CardEngagementStats\";\r\nimport { getFreshnessTag } from \"@/lib/dateUtils\";\r\nimport { type Article } from \"@/lib/newsApi\";\r\nimport AudioPlayer from \"@/components/AudioPlayer\";\r\nimport ArticleDetailView from \"@/components/ArticleDetailView\";\r\n\r\ninterface NewsCardProps {\r\n    article: Article;\r\n}\r\n\r\nexport default function NewsCard({ article }: NewsCardProps) {\r\n    const freshness = getFreshnessTag(article.published_at);\r\n    const safeImage = article.image_url && article.image_url !== \"None\" ? article.image_url : \"/placeholder-news.svg\";\r\n\r\n    // Modal State\r\n    const [showModal, setShowModal] = useState(false);\r\n    const timerRef = useRef<NodeJS.Timeout | null>(null);\r\n    const modalRef = useRef<HTMLDivElement>(null);\r\n\r\n    // Hover Logic\r\n    const handleMouseEnter = () => {\r\n        // Start 2s timer\r\n        timerRef.current = setTimeout(() => {\r\n            setShowModal(true);\r\n        }, 2000);\r\n    };\r\n\r\n    const handleMouseLeave = () => {\r\n        // Cancel timer if mouse leaves before 2s\r\n        if (timerRef.current) {\r\n            clearTimeout(timerRef.current);\r\n            timerRef.current = null;\r\n        }\r\n    };\r\n\r\n    // Close modal\r\n    const closeModal = () => setShowModal(false);\r\n\r\n    // Close on Escape key\r\n    useEffect(() => {\r\n        const handleEsc = (e: KeyboardEvent) => {\r\n            if (e.key === 'Escape') closeModal();\r\n        };\r\n        if (showModal) {\r\n            window.addEventListener('keydown', handleEsc);\r\n        }\r\n        return () => window.removeEventListener('keydown', handleEsc);\r\n    }, [showModal]);\r\n\r\n    // Construct the article URL params (legacy link)\r\n    const articleLink = `/pulse/news/article?url=${encodeURIComponent(article.url)}&title=${encodeURIComponent(article.title)}&description=${encodeURIComponent(article.description || '')}&image=${encodeURIComponent(safeImage)}&date=${encodeURIComponent(article.published_at)}&source=${encodeURIComponent(article.source)}&id=${article.$id || ''}&category=${article.category || ''}&audio_url=${encodeURIComponent(article.audio_url || '')}&text_summary=${encodeURIComponent(article.text_summary || '')}`;\r\n\r\n    return (\r\n        <>\r\n            <div\r\n                onMouseEnter={handleMouseEnter}\r\n                onMouseLeave={handleMouseLeave}\r\n                className=\"group block bg-white rounded-xl shadow-md hover:shadow-xl transition-all overflow-hidden relative\"\r\n            >\r\n                {/* Wrap content in Link but handle click to avoid double nav if desired? \r\n                      Actually, clicking should still go to page if modal hasn't opened yet.\r\n                  */}\r\n                <Link href={articleLink} className=\"block h-full\">\r\n                    {/* Image Section */}\r\n                    <div className=\"relative h-32\">\r\n                        <img\r\n                            src={safeImage}\r\n                            onError={(e) => { e.currentTarget.src = \"/pulse/placeholder-news.svg\"; }}\r\n                            alt={article.title}\r\n                            className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300\"\r\n                        />\r\n\r\n                        {/* Freshness Tag */}\r\n                        <div className={`absolute top-2 left-2 px-2 py-1 rounded-md text-[10px] font-bold shadow-sm ${freshness.className}`}>\r\n                            {freshness.text}\r\n                        </div>\r\n\r\n                        {/* External Link Icon */}\r\n                        <div className=\"absolute top-2 right-2 bg-white/90 rounded-full p-2\">\r\n                            <ExternalLink className=\"w-4 h-4 text-blue-600\" />\r\n                        </div>\r\n\r\n                        {/* Source Overlay on Hover */}\r\n                        <div className=\"absolute inset-0 bg-black/60 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300\">\r\n                            <div className=\"bg-white px-4 py-2 rounded-lg shadow-lg\">\r\n                                <span className=\"font-bold text-gray-900 text-sm whitespace-nowrap\">\r\n                                    Source: {article.source}\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Content Section */}\r\n                    <div className=\"p-3\">\r\n                        <h3 className=\"font-bold text-base mb-2 line-clamp-2 group-hover:text-blue-600 transition-colors\">\r\n                            {article.title}\r\n                        </h3>\r\n                        <p className=\"text-sm text-gray-600 mb-2 line-clamp-2\">\r\n                            {article.description}\r\n                        </p>\r\n                        <div className=\"flex items-center justify-between text-xs text-gray-500 mt-auto\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <AudioPlayer\r\n                                    articleId={article.$id || article.url}\r\n                                    articleUrl={article.url}\r\n                                    initialAudioUrl={article.audio_url}\r\n                                    title={article.title}\r\n                                    image={safeImage}\r\n                                    category={article.category || ''}\r\n                                />\r\n                                <TimeDisplay timestamp={article.published_at} />\r\n                            </div>\r\n                            <CardEngagementStats\r\n                                articleUrl={article.url}\r\n                                articleId={article.$id}  // NEW: Use authoritative backend ID\r\n                                initialStats={{\r\n                                    viewCount: article.views || 0,\r\n                                    likeCount: article.likes || 0,\r\n                                    dislikeCount: article.dislikes || 0\r\n                                }}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </Link>\r\n            </div>\r\n\r\n            {/* Portal for Hover Modal */}\r\n            {showModal && typeof window !== 'undefined' && createPortal(\r\n                <div\r\n                    className=\"fixed inset-0 z-[9999] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-in fade-in duration-200\"\r\n                    onClick={closeModal} // Close on backdrop click\r\n                >\r\n                    <div\r\n                        ref={modalRef}\r\n                        className=\"relative w-full max-w-4xl max-h-[90vh] overflow-y-auto bg-white rounded-2xl shadow-2xl animate-in zoom-in-95 duration-200\"\r\n                        onClick={(e) => e.stopPropagation()} // Prevent click from closing when clicking inside\r\n                        onMouseLeave={() => {\r\n                            // Grace period close on mouse leave from MODAL itself?\r\n                            // User requirement: \"Mouse leave the Modal Area ... closes it after a short grace period (0.5s)\"\r\n                            setTimeout(closeModal, 500);\r\n                        }}\r\n                    >\r\n                        <button\r\n                            onClick={closeModal}\r\n                            className=\"absolute top-4 right-4 z-50 p-2 bg-black/50 hover:bg-black/70 text-white rounded-full transition-colors\"\r\n                        >\r\n                            <X className=\"w-5 h-5\" />\r\n                        </button>\r\n\r\n                        <ArticleDetailView\r\n                            article={{\r\n                                url: article.url,\r\n                                title: article.title,\r\n                                description: article.description || '',\r\n                                image_url: safeImage,\r\n                                published_at: article.published_at,\r\n                                source: article.source,\r\n                                category: article.category || '',\r\n                                id: article.$id || '',\r\n                                audio_url: article.audio_url,\r\n                                text_summary: article.text_summary\r\n                            }}\r\n                            isModal={true}\r\n                        />\r\n                    </div>\r\n                </div>,\r\n                document.body\r\n            )}\r\n        </>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2456, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Dell/Desktop/Segmento-app-website-dev/frontend/apps/pulse/app/%28pulse%29/news/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState, Suspense } from \"react\";\r\nimport { useSearchParams } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\nimport { fetchNewsByCategory, type Article } from \"@/lib/newsApi\";\r\nimport { useInfiniteScroll } from \"@/hooks/useInfiniteScroll\";\r\nimport { Clock, ExternalLink } from \"lucide-react\";\r\nimport ViewCounter from \"@/components/ViewCounter\";\r\nimport TimeDisplay from \"@/components/TimeDisplay\";\r\nimport CardEngagementStats from \"@/components/CardEngagementStats\";\r\nimport NewsCard from \"@/components/NewsCard\";\r\n\r\n// Force dynamic rendering (for client components, only 'dynamic' is allowed)\r\nexport const dynamic = 'force-dynamic';\r\n\r\n// Category relationship mapping - each category shows only its related subcategories\r\nconst categoryRelationships: Record<string, Array<{ id: string; name: string }>> = {\r\n    // Data categories show all data subcategories\r\n    'data-security': [\r\n        { id: \"data-laws\", name: \"Data Laws\" },\r\n        { id: \"business-analytics\", name: \"Business Analytics\" },\r\n        { id: \"business-intelligence\", name: \"Business Intelligence\" },\r\n        { id: \"customer-data-platform\", name: \"Customer Data Platform\" },\r\n        { id: \"data-centers\", name: \"Data Centers\" },\r\n        { id: \"data-engineering\", name: \"Data Engineering\" },\r\n        { id: \"data-governance\", name: \"Data Governance\" },\r\n        { id: \"data-management\", name: \"Data Management\" },\r\n        { id: \"data-privacy\", name: \"Data Privacy\" },\r\n        { id: \"data-security\", name: \"Data Security\" },\r\n    ],\r\n    'data-governance': [\r\n        { id: \"data-laws\", name: \"Data Laws\" },\r\n        { id: \"business-analytics\", name: \"Business Analytics\" },\r\n        { id: \"business-intelligence\", name: \"Business Intelligence\" },\r\n        { id: \"customer-data-platform\", name: \"Customer Data Platform\" },\r\n        { id: \"data-centers\", name: \"Data Centers\" },\r\n        { id: \"data-engineering\", name: \"Data Engineering\" },\r\n        { id: \"data-governance\", name: \"Data Governance\" },\r\n        { id: \"data-management\", name: \"Data Management\" },\r\n        { id: \"data-privacy\", name: \"Data Privacy\" },\r\n        { id: \"data-security\", name: \"Data Security\" },\r\n    ],\r\n    'data-privacy': [\r\n        { id: \"data-laws\", name: \"Data Laws\" },\r\n        { id: \"business-analytics\", name: \"Business Analytics\" },\r\n        { id: \"business-intelligence\", name: \"Business Intelligence\" },\r\n        { id: \"customer-data-platform\", name: \"Customer Data Platform\" },\r\n        { id: \"data-centers\", name: \"Data Centers\" },\r\n        { id: \"data-engineering\", name: \"Data Engineering\" },\r\n        { id: \"data-governance\", name: \"Data Governance\" },\r\n        { id: \"data-management\", name: \"Data Management\" },\r\n        { id: \"data-privacy\", name: \"Data Privacy\" },\r\n        { id: \"data-security\", name: \"Data Security\" },\r\n    ],\r\n    'data-engineering': [\r\n        { id: \"data-laws\", name: \"Data Laws\" },\r\n        { id: \"business-analytics\", name: \"Business Analytics\" },\r\n        { id: \"business-intelligence\", name: \"Business Intelligence\" },\r\n        { id: \"customer-data-platform\", name: \"Customer Data Platform\" },\r\n        { id: \"data-centers\", name: \"Data Centers\" },\r\n        { id: \"data-engineering\", name: \"Data Engineering\" },\r\n        { id: \"data-governance\", name: \"Data Governance\" },\r\n        { id: \"data-management\", name: \"Data Management\" },\r\n        { id: \"data-privacy\", name: \"Data Privacy\" },\r\n        { id: \"data-security\", name: \"Data Security\" },\r\n    ],\r\n    'business-analytics': [\r\n        { id: \"data-laws\", name: \"Data Laws\" },\r\n        { id: \"business-analytics\", name: \"Business Analytics\" },\r\n        { id: \"business-intelligence\", name: \"Business Intelligence\" },\r\n        { id: \"customer-data-platform\", name: \"Customer Data Platform\" },\r\n        { id: \"data-centers\", name: \"Data Centers\" },\r\n        { id: \"data-engineering\", name: \"Data Engineering\" },\r\n        { id: \"data-governance\", name: \"Data Governance\" },\r\n        { id: \"data-management\", name: \"Data Management\" },\r\n        { id: \"data-privacy\", name: \"Data Privacy\" },\r\n        { id: \"data-security\", name: \"Data Security\" },\r\n    ],\r\n    'business-intelligence': [\r\n        { id: \"data-laws\", name: \"Data Laws\" },\r\n        { id: \"business-analytics\", name: \"Business Analytics\" },\r\n        { id: \"business-intelligence\", name: \"Business Intelligence\" },\r\n        { id: \"customer-data-platform\", name: \"Customer Data Platform\" },\r\n        { id: \"data-centers\", name: \"Data Centers\" },\r\n        { id: \"data-engineering\", name: \"Data Engineering\" },\r\n        { id: \"data-governance\", name: \"Data Governance\" },\r\n        { id: \"data-management\", name: \"Data Management\" },\r\n        { id: \"data-privacy\", name: \"Data Privacy\" },\r\n        { id: \"data-security\", name: \"Data Security\" },\r\n    ],\r\n    'customer-data-platform': [\r\n        { id: \"data-laws\", name: \"Data Laws\" },\r\n        { id: \"business-analytics\", name: \"Business Analytics\" },\r\n        { id: \"business-intelligence\", name: \"Business Intelligence\" },\r\n        { id: \"customer-data-platform\", name: \"Customer Data Platform\" },\r\n        { id: \"data-centers\", name: \"Data Centers\" },\r\n        { id: \"data-engineering\", name: \"Data Engineering\" },\r\n        { id: \"data-governance\", name: \"Data Governance\" },\r\n        { id: \"data-management\", name: \"Data Management\" },\r\n        { id: \"data-privacy\", name: \"Data Privacy\" },\r\n        { id: \"data-security\", name: \"Data Security\" },\r\n    ],\r\n    'data-centers': [\r\n        { id: \"data-laws\", name: \"Data Laws\" },\r\n        { id: \"business-analytics\", name: \"Business Analytics\" },\r\n        { id: \"business-intelligence\", name: \"Business Intelligence\" },\r\n        { id: \"customer-data-platform\", name: \"Customer Data Platform\" },\r\n        { id: \"data-centers\", name: \"Data Centers\" },\r\n        { id: \"data-engineering\", name: \"Data Engineering\" },\r\n        { id: \"data-governance\", name: \"Data Governance\" },\r\n        { id: \"data-management\", name: \"Data Management\" },\r\n        { id: \"data-privacy\", name: \"Data Privacy\" },\r\n        { id: \"data-security\", name: \"Data Security\" },\r\n    ],\r\n\r\n    // Add data-management itself\r\n    'data-management': [\r\n        { id: \"data-laws\", name: \"Data Laws\" },\r\n        { id: \"business-analytics\", name: \"Business Analytics\" },\r\n        { id: \"business-intelligence\", name: \"Business Intelligence\" },\r\n        { id: \"customer-data-platform\", name: \"Customer Data Platform\" },\r\n        { id: \"data-centers\", name: \"Data Centers\" },\r\n        { id: \"data-engineering\", name: \"Data Engineering\" },\r\n        { id: \"data-governance\", name: \"Data Governance\" },\r\n        { id: \"data-management\", name: \"Data Management\" },\r\n        { id: \"data-privacy\", name: \"Data Privacy\" },\r\n        { id: \"data-security\", name: \"Data Security\" },\r\n    ],\r\n\r\n    // Add data-laws itself\r\n    'data-laws': [\r\n        { id: \"data-laws\", name: \"Data Laws\" },\r\n        { id: \"business-analytics\", name: \"Business Analytics\" },\r\n        { id: \"business-intelligence\", name: \"Business Intelligence\" },\r\n        { id: \"customer-data-platform\", name: \"Customer Data Platform\" },\r\n        { id: \"data-centers\", name: \"Data Centers\" },\r\n        { id: \"data-engineering\", name: \"Data Engineering\" },\r\n        { id: \"data-governance\", name: \"Data Governance\" },\r\n        { id: \"data-management\", name: \"Data Management\" },\r\n        { id: \"data-privacy\", name: \"Data Privacy\" },\r\n        { id: \"data-security\", name: \"Data Security\" },\r\n    ],\r\n\r\n    // AI shows only AI\r\n    'ai': [{ id: \"ai\", name: \"AI\" }],\r\n\r\n    // Medium Article shows only Medium Article\r\n    'medium-article': [{ id: \"medium-article\", name: \"Medium Article\" }],\r\n\r\n    // Cloud Computing shows cloud provider subcategories\r\n    'cloud-computing': [\r\n        { id: \"cloud-computing\", name: \"All Cloud\" },\r\n        { id: \"cloud-aws\", name: \"AWS\" },\r\n        { id: \"cloud-gcp\", name: \"GCP\" },\r\n        { id: \"cloud-azure\", name: \"Azure\" },\r\n        { id: \"cloud-ibm\", name: \"IBM Cloud\" },\r\n        { id: \"cloud-oracle\", name: \"Oracle\" },\r\n        { id: \"cloud-digitalocean\", name: \"DigitalOcean\" },\r\n        { id: \"cloud-salesforce\", name: \"Salesforce\" },\r\n        { id: \"cloud-alibaba\", name: \"Alibaba Cloud\" },\r\n        { id: \"cloud-tencent\", name: \"Tencent Cloud\" },\r\n        { id: \"cloud-huawei\", name: \"Huawei Cloud\" },\r\n        { id: \"cloud-cloudflare\", name: \"Cloudflare\" },\r\n    ],\r\n    'cloud-aws': [\r\n        { id: \"cloud-computing\", name: \"All Cloud\" },\r\n        { id: \"cloud-aws\", name: \"AWS\" },\r\n        { id: \"cloud-gcp\", name: \"GCP\" },\r\n        { id: \"cloud-azure\", name: \"Azure\" },\r\n        { id: \"cloud-ibm\", name: \"IBM Cloud\" },\r\n        { id: \"cloud-oracle\", name: \"Oracle\" },\r\n        { id: \"cloud-digitalocean\", name: \"DigitalOcean\" },\r\n        { id: \"cloud-salesforce\", name: \"Salesforce\" },\r\n        { id: \"cloud-alibaba\", name: \"Alibaba Cloud\" },\r\n        { id: \"cloud-tencent\", name: \"Tencent Cloud\" },\r\n        { id: \"cloud-huawei\", name: \"Huawei Cloud\" },\r\n        { id: \"cloud-cloudflare\", name: \"Cloudflare\" },\r\n    ],\r\n    'cloud-gcp': [\r\n        { id: \"cloud-computing\", name: \"All Cloud\" },\r\n        { id: \"cloud-aws\", name: \"AWS\" },\r\n        { id: \"cloud-gcp\", name: \"GCP\" },\r\n        { id: \"cloud-azure\", name: \"Azure\" },\r\n        { id: \"cloud-ibm\", name: \"IBM Cloud\" },\r\n        { id: \"cloud-oracle\", name: \"Oracle\" },\r\n        { id: \"cloud-digitalocean\", name: \"DigitalOcean\" },\r\n        { id: \"cloud-salesforce\", name: \"Salesforce\" },\r\n        { id: \"cloud-alibaba\", name: \"Alibaba Cloud\" },\r\n        { id: \"cloud-tencent\", name: \"Tencent Cloud\" },\r\n        { id: \"cloud-huawei\", name: \"Huawei Cloud\" },\r\n        { id: \"cloud-cloudflare\", name: \"Cloudflare\" },\r\n    ],\r\n    'cloud-azure': [\r\n        { id: \"cloud-computing\", name: \"All Cloud\" },\r\n        { id: \"cloud-aws\", name: \"AWS\" },\r\n        { id: \"cloud-gcp\", name: \"GCP\" },\r\n        { id: \"cloud-azure\", name: \"Azure\" },\r\n        { id: \"cloud-ibm\", name: \"IBM Cloud\" },\r\n        { id: \"cloud-oracle\", name: \"Oracle\" },\r\n        { id: \"cloud-digitalocean\", name: \"DigitalOcean\" },\r\n        { id: \"cloud-salesforce\", name: \"Salesforce\" },\r\n        { id: \"cloud-alibaba\", name: \"Alibaba Cloud\" },\r\n        { id: \"cloud-tencent\", name: \"Tencent Cloud\" },\r\n        { id: \"cloud-huawei\", name: \"Huawei Cloud\" },\r\n        { id: \"cloud-cloudflare\", name: \"Cloudflare\" },\r\n    ],\r\n    'cloud-ibm': [\r\n        { id: \"cloud-computing\", name: \"All Cloud\" },\r\n        { id: \"cloud-aws\", name: \"AWS\" },\r\n        { id: \"cloud-gcp\", name: \"GCP\" },\r\n        { id: \"cloud-azure\", name: \"Azure\" },\r\n        { id: \"cloud-ibm\", name: \"IBM Cloud\" },\r\n        { id: \"cloud-oracle\", name: \"Oracle\" },\r\n        { id: \"cloud-digitalocean\", name: \"DigitalOcean\" },\r\n        { id: \"cloud-salesforce\", name: \"Salesforce\" },\r\n        { id: \"cloud-alibaba\", name: \"Alibaba Cloud\" },\r\n        { id: \"cloud-tencent\", name: \"Tencent Cloud\" },\r\n        { id: \"cloud-huawei\", name: \"Huawei Cloud\" },\r\n        { id: \"cloud-cloudflare\", name: \"Cloudflare\" },\r\n    ],\r\n    'cloud-oracle': [\r\n        { id: \"cloud-computing\", name: \"All Cloud\" },\r\n        { id: \"cloud-aws\", name: \"AWS\" },\r\n        { id: \"cloud-gcp\", name: \"GCP\" },\r\n        { id: \"cloud-azure\", name: \"Azure\" },\r\n        { id: \"cloud-ibm\", name: \"IBM Cloud\" },\r\n        { id: \"cloud-oracle\", name: \"Oracle\" },\r\n        { id: \"cloud-digitalocean\", name: \"DigitalOcean\" },\r\n        { id: \"cloud-salesforce\", name: \"Salesforce\" },\r\n        { id: \"cloud-alibaba\", name: \"Alibaba Cloud\" },\r\n        { id: \"cloud-tencent\", name: \"Tencent Cloud\" },\r\n        { id: \"cloud-huawei\", name: \"Huawei Cloud\" },\r\n        { id: \"cloud-cloudflare\", name: \"Cloudflare\" },\r\n    ],\r\n    'cloud-digitalocean': [\r\n        { id: \"cloud-computing\", name: \"All Cloud\" },\r\n        { id: \"cloud-aws\", name: \"AWS\" },\r\n        { id: \"cloud-gcp\", name: \"GCP\" },\r\n        { id: \"cloud-azure\", name: \"Azure\" },\r\n        { id: \"cloud-ibm\", name: \"IBM Cloud\" },\r\n        { id: \"cloud-oracle\", name: \"Oracle\" },\r\n        { id: \"cloud-digitalocean\", name: \"DigitalOcean\" },\r\n        { id: \"cloud-salesforce\", name: \"Salesforce\" },\r\n        { id: \"cloud-alibaba\", name: \"Alibaba Cloud\" },\r\n        { id: \"cloud-tencent\", name: \"Tencent Cloud\" },\r\n        { id: \"cloud-huawei\", name: \"Huawei Cloud\" },\r\n        { id: \"cloud-cloudflare\", name: \"Cloudflare\" },\r\n    ],\r\n    'cloud-salesforce': [\r\n        { id: \"cloud-computing\", name: \"All Cloud\" },\r\n        { id: \"cloud-aws\", name: \"AWS\" },\r\n        { id: \"cloud-gcp\", name: \"GCP\" },\r\n        { id: \"cloud-azure\", name: \"Azure\" },\r\n        { id: \"cloud-ibm\", name: \"IBM Cloud\" },\r\n        { id: \"cloud-oracle\", name: \"Oracle\" },\r\n        { id: \"cloud-digitalocean\", name: \"DigitalOcean\" },\r\n        { id: \"cloud-salesforce\", name: \"Salesforce\" },\r\n        { id: \"cloud-alibaba\", name: \"Alibaba Cloud\" },\r\n        { id: \"cloud-tencent\", name: \"Tencent Cloud\" },\r\n        { id: \"cloud-huawei\", name: \"Huawei Cloud\" },\r\n        { id: \"cloud-cloudflare\", name: \"Cloudflare\" },\r\n    ],\r\n    'cloud-alibaba': [\r\n        { id: \"cloud-computing\", name: \"All Cloud\" },\r\n        { id: \"cloud-aws\", name: \"AWS\" },\r\n        { id: \"cloud-gcp\", name: \"GCP\" },\r\n        { id: \"cloud-azure\", name: \"Azure\" },\r\n        { id: \"cloud-ibm\", name: \"IBM Cloud\" },\r\n        { id: \"cloud-oracle\", name: \"Oracle\" },\r\n        { id: \"cloud-digitalocean\", name: \"DigitalOcean\" },\r\n        { id: \"cloud-salesforce\", name: \"Salesforce\" },\r\n        { id: \"cloud-alibaba\", name: \"Alibaba Cloud\" },\r\n        { id: \"cloud-tencent\", name: \"Tencent Cloud\" },\r\n        { id: \"cloud-huawei\", name: \"Huawei Cloud\" },\r\n        { id: \"cloud-cloudflare\", name: \"Cloudflare\" },\r\n    ],\r\n    'cloud-tencent': [\r\n        { id: \"cloud-computing\", name: \"All Cloud\" },\r\n        { id: \"cloud-aws\", name: \"AWS\" },\r\n        { id: \"cloud-gcp\", name: \"GCP\" },\r\n        { id: \"cloud-azure\", name: \"Azure\" },\r\n        { id: \"cloud-ibm\", name: \"IBM Cloud\" },\r\n        { id: \"cloud-oracle\", name: \"Oracle\" },\r\n        { id: \"cloud-digitalocean\", name: \"DigitalOcean\" },\r\n        { id: \"cloud-salesforce\", name: \"Salesforce\" },\r\n        { id: \"cloud-alibaba\", name: \"Alibaba Cloud\" },\r\n        { id: \"cloud-tencent\", name: \"Tencent Cloud\" },\r\n        { id: \"cloud-huawei\", name: \"Huawei Cloud\" },\r\n        { id: \"cloud-cloudflare\", name: \"Cloudflare\" },\r\n    ],\r\n    'cloud-huawei': [\r\n        { id: \"cloud-computing\", name: \"All Cloud\" },\r\n        { id: \"cloud-aws\", name: \"AWS\" },\r\n        { id: \"cloud-gcp\", name: \"GCP\" },\r\n        { id: \"cloud-azure\", name: \"Azure\" },\r\n        { id: \"cloud-ibm\", name: \"IBM Cloud\" },\r\n        { id: \"cloud-oracle\", name: \"Oracle\" },\r\n        { id: \"cloud-digitalocean\", name: \"DigitalOcean\" },\r\n        { id: \"cloud-salesforce\", name: \"Salesforce\" },\r\n        { id: \"cloud-alibaba\", name: \"Alibaba Cloud\" },\r\n        { id: \"cloud-tencent\", name: \"Tencent Cloud\" },\r\n        { id: \"cloud-huawei\", name: \"Huawei Cloud\" },\r\n        { id: \"cloud-cloudflare\", name: \"Cloudflare\" },\r\n    ],\r\n    'cloud-cloudflare': [\r\n        { id: \"cloud-computing\", name: \"All Cloud\" },\r\n        { id: \"cloud-aws\", name: \"AWS\" },\r\n        { id: \"cloud-gcp\", name: \"GCP\" },\r\n        { id: \"cloud-azure\", name: \"Azure\" },\r\n        { id: \"cloud-ibm\", name: \"IBM Cloud\" },\r\n        { id: \"cloud-oracle\", name: \"Oracle\" },\r\n        { id: \"cloud-digitalocean\", name: \"DigitalOcean\" },\r\n        { id: \"cloud-salesforce\", name: \"Salesforce\" },\r\n        { id: \"cloud-alibaba\", name: \"Alibaba Cloud\" },\r\n        { id: \"cloud-tencent\", name: \"Tencent Cloud\" },\r\n        { id: \"cloud-huawei\", name: \"Huawei Cloud\" },\r\n        { id: \"cloud-cloudflare\", name: \"Cloudflare\" },\r\n    ],\r\n\r\n    // Magazines shows only magazines\r\n    'magazines': [{ id: \"magazines\", name: \"Magazines\" }],\r\n};\r\n\r\nfunction NewsContent() {\r\n    const searchParams = useSearchParams();\r\n    const categoryParam = searchParams.get('category') || 'ai';\r\n\r\n    const [newsData, setNewsData] = useState<Record<string, Article[]>>({});\r\n    const [activeCategory, setActiveCategory] = useState<string>(categoryParam);\r\n    const [loading, setLoading] = useState<boolean>(false);\r\n    const [loadingMore, setLoadingMore] = useState<boolean>(false);\r\n    const [currentPage, setCurrentPage] = useState<Record<string, number>>({});\r\n    const [hasMore, setHasMore] = useState<Record<string, boolean>>({});\r\n\r\n    // Get categories to show based on current category\r\n    const categoriesToShow = categoryRelationships[activeCategory] || [{ id: activeCategory, name: activeCategory }];\r\n\r\n    useEffect(() => {\r\n        setActiveCategory(categoryParam);\r\n    }, [categoryParam]);\r\n\r\n    useEffect(() => {\r\n        const getNews = async () => {\r\n            // Skip if already loaded and cache is fresh (within 2 minutes)\r\n            const cached = newsData[activeCategory];\r\n            if (cached && cached.length > 0) {\r\n                const cacheAge = Date.now() - (cached as any)._timestamp;\r\n                if (cacheAge < 120000) { // 2 minutes\r\n                    return; // Use cached data\r\n                }\r\n            }\r\n\r\n            try {\r\n                setLoading(true);\r\n                const articles = await fetchNewsByCategory(activeCategory, 1, 20);\r\n\r\n                setNewsData((prev) => ({\r\n                    ...prev,\r\n                    [activeCategory]: Object.assign(articles, { _timestamp: Date.now() }),\r\n                }));\r\n\r\n                setCurrentPage((prev) => ({ ...prev, [activeCategory]: 1 }));\r\n                setHasMore((prev) => ({ ...prev, [activeCategory]: articles.length >= 20 }));\r\n            } catch (error) {\r\n                console.error(\"News fetch error:\", error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        getNews();\r\n    }, [activeCategory]);\r\n\r\n    const loadMoreNews = async () => {\r\n        const nextPage = (currentPage[activeCategory] || 1) + 1;\r\n\r\n        try {\r\n            setLoadingMore(true);\r\n            const newArticles = await fetchNewsByCategory(activeCategory, nextPage, 20);\r\n\r\n            if (newArticles.length > 0) {\r\n                setNewsData((prev) => ({\r\n                    ...prev,\r\n                    [activeCategory]: Object.assign([...prev[activeCategory], ...newArticles], { _timestamp: Date.now() }),\r\n                }));\r\n\r\n                setCurrentPage((prev) => ({ ...prev, [activeCategory]: nextPage }));\r\n                setHasMore((prev) => ({ ...prev, [activeCategory]: newArticles.length >= 20 }));\r\n            } else {\r\n                setHasMore((prev) => ({ ...prev, [activeCategory]: false }));\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Load more error:\", error);\r\n        } finally {\r\n            setLoadingMore(false);\r\n        }\r\n    };\r\n\r\n    const articles = newsData[activeCategory] || [];\r\n\r\n    return (\r\n        <div className=\"container mx-auto px-4 py-8\">\r\n            {/* Category Buttons */}\r\n            <div className=\"flex gap-3 mb-8 flex-wrap justify-center\">\r\n                {categoriesToShow.map((cat) => {\r\n                    // Check if this is a cloud provider category\r\n                    const isCloudProvider = cat.id.startsWith('cloud-') && cat.id !== 'cloud-computing';\r\n                    const providerName = cat.id.replace('cloud-', '');\r\n\r\n                    return (\r\n                        <Link\r\n                            key={cat.id}\r\n                            href={`/news?category=${cat.id}`}\r\n                            className={`px-6 py-2 rounded-full transition-all flex items-center gap-2 ${activeCategory === cat.id\r\n                                ? \"bg-blue-600 text-white shadow-lg\"\r\n                                : \"bg-gray-100 hover:bg-gray-200\"\r\n                                }`}\r\n                        >\r\n                            {isCloudProvider && (\r\n                                <img\r\n                                    src={`/cloud-logos/${providerName}.${['salesforce', 'alibaba', 'tencent', 'huawei'].includes(providerName) ? 'png' : 'svg'}`}\r\n                                    alt={`${cat.name} logo`}\r\n                                    className=\"w-5 h-5 object-contain\"\r\n                                />\r\n                            )}\r\n                            <span>{cat.name}</span>\r\n                        </Link>\r\n                    );\r\n                })}\r\n            </div>\r\n\r\n            {/* Content */}\r\n            {loading ? (\r\n                <div className=\"text-center py-20\">\r\n                    <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n                    <p className=\"mt-4 text-muted-foreground\">Loading news...</p>\r\n                </div>\r\n            ) : articles.length === 0 ? (\r\n                <div className=\"text-center py-20\">\r\n                    <p className=\"text-gray-500\">No news available for this category</p>\r\n                </div>\r\n            ) : (\r\n                <div className=\"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4\">\r\n                    {articles.map((article, i) => (\r\n                        <NewsCard key={i} article={article} />\r\n                    ))}\r\n                </div>\r\n            )}\r\n\r\n            {/* Load More Button - shown when there are more articles */}\r\n            {!loading && articles.length > 0 && hasMore[activeCategory] && (\r\n                <div className=\"text-center mt-8\">\r\n                    <button\r\n                        onClick={loadMoreNews}\r\n                        disabled={loadingMore}\r\n                        className=\"px-8 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center gap-2\"\r\n                    >\r\n                        {loadingMore ? (\r\n                            <>\r\n                                <div className=\"inline-block animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\r\n                                <span>Loading more...</span>\r\n                            </>\r\n                        ) : (\r\n                            <span>Load More Articles</span>\r\n                        )}\r\n                    </button>\r\n                    <p className=\"text-sm text-gray-500 mt-2\">\r\n                        Showing {articles.length} articles ‚Ä¢ Page {currentPage[activeCategory] || 1}\r\n                    </p>\r\n                </div>\r\n            )}\r\n\r\n            {/* End of articles message */}\r\n            {!loading && articles.length > 0 && !hasMore[activeCategory] && (\r\n                <div className=\"text-center mt-8 py-4\">\r\n                    <p className=\"text-gray-500\">You've reached the end of {activeCategory} news</p>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default function NewsPage() {\r\n    return (\r\n        <Suspense fallback={\r\n            <div className=\"container mx-auto px-4 py-20 text-center\">\r\n                <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n                <p className=\"mt-4 text-muted-foreground\">Loading...</p>\r\n            </div>\r\n        }>\r\n            <NewsContent />\r\n        </Suspense>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}